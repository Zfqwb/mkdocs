
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="MkDocs Material Boilerplate (Starter Kit) - Deploy documentation to hosting platforms (Netlify, GitHub Pages, GitLab Pages, and AWS Amplify Console) with Docker, pipenv, and GitHub Actions.">
      
      
      
        <meta name="author" content="nitto">
      
      
        <link rel="canonical" href="https://nitto.netlify.app/MySQL/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.9">
    
    
      
        <title>Mysql - Nitto Java Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
      <link rel="manifest" href="../manifest.json" crossorigin="use-credentials">
    
    
      <link rel="stylesheet" href="../assets/css/custom.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mysql" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Nitto Java Docs" class="md-header__button md-logo" aria-label="Nitto Java Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nitto Java Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mysql
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/Zfqwb/mkdocs/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Nitto Java Docs" class="md-nav__button md-logo" aria-label="Nitto Java Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Nitto Java Docs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Zfqwb/mkdocs/" title="前往 GitHub 仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Mysql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Mysql
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#day01" class="md-nav__link">
    day01
  </a>
  
    <nav class="md-nav" aria-label="day01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01" class="md-nav__link">
    01操作数据库和数据表
  </a>
  
    <nav class="md-nav" aria-label="01操作数据库和数据表">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    查询所有数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    查询某个数据库的创建语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    创建数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    创建数据库，判断、如果不存在则创建
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    创建数据库、并指定字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    查看数据库的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    修改数据库的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    删除数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    删除数据库，判断、如果存在则删除
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    使用数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    查询当前使用的数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    查询所有数据表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    查询表结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    查询数据表的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    创建数据表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    修改表名
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    修改表的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    给表添加列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    修改表中列的数据类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    修改表中列的名称和数据类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    删除表中的列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    删除表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    删除表，判断、如果存在则删除
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02" class="md-nav__link">
    02表数据的增删改
  </a>
  
    <nav class="md-nav" aria-label="02表数据的增删改">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    给指定列添加数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    给全部列添加数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    批量添加所有列数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    修改表数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    删除表数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03" class="md-nav__link">
    03表数据的查询
  </a>
  
    <nav class="md-nav" aria-label="03表数据的查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    查询全部数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    查询指定列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    去除重复查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    计算列的值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    起别名
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    条件查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    聚合函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    排序查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    分组查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    分页查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04" class="md-nav__link">
    04约束
  </a>
  
    <nav class="md-nav" aria-label="04约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    主键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    主键自增约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    唯一约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    非空约束
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day02" class="md-nav__link">
    day02
  </a>
  
    <nav class="md-nav" aria-label="day02">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01_1" class="md-nav__link">
    01约束
  </a>
  
    <nav class="md-nav" aria-label="01约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    外键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    删除外键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    建表后单独添加外键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    外键级联操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02_1" class="md-nav__link">
    02多表操作
  </a>
  
    <nav class="md-nav" aria-label="02多表操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    表关系一对一
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    表关系一对多
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    表关系多对多
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    多表查询数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    内连接查询
  </a>
  
    <nav class="md-nav" aria-label="内连接查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    显示内连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    隐式内连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    外连接查询
  </a>
  
    <nav class="md-nav" aria-label="外连接查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    左外连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    右外连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    自关联查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    多表查询练习
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03_1" class="md-nav__link">
    03视图
  </a>
  
    <nav class="md-nav" aria-label="03视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_" class="md-nav__link">
    视图_数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    创建视图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    查询视图
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day03" class="md-nav__link">
    day03
  </a>
  
    <nav class="md-nav" aria-label="day03">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01_2" class="md-nav__link">
    01视图
  </a>
  
    <nav class="md-nav" aria-label="01视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    创建视图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    查询视图
  </a>
  
    <nav class="md-nav" aria-label="查询视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_65" class="md-nav__link">
    查询视图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_66" class="md-nav__link">
    查询创建视图的语句
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_67" class="md-nav__link">
    修改视图
  </a>
  
    <nav class="md-nav" aria-label="修改视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_68" class="md-nav__link">
    修改视图表数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_69" class="md-nav__link">
    修改视图表结构
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_70" class="md-nav__link">
    删除视图
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02_2" class="md-nav__link">
    02存储过程和函数
  </a>
  
    <nav class="md-nav" aria-label="02存储过程和函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_71" class="md-nav__link">
    数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_72" class="md-nav__link">
    创建存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_73" class="md-nav__link">
    调用存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_74" class="md-nav__link">
    查询数据库中所有的存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_75" class="md-nav__link">
    查看存储过程的状态信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_76" class="md-nav__link">
    查看存储过程的创建语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_77" class="md-nav__link">
    删除存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    存储过程-变量
  </a>
  
    <nav class="md-nav" aria-label="存储过程-变量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_78" class="md-nav__link">
    定义变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    变量赋值-方式一
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-if" class="md-nav__link">
    存储过程-if语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__1" class="md-nav__link">
    存储过程_输入参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__2" class="md-nav__link">
    存储过程_输出参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_case" class="md-nav__link">
    存储过程_case语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_while" class="md-nav__link">
    存储过程_while循环
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_repeat" class="md-nav__link">
    存储过程_repeat循环
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_loop" class="md-nav__link">
    存储过程_loop循环
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__3" class="md-nav__link">
    存储过程_游标
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__4" class="md-nav__link">
    存储过程_游标优化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_79" class="md-nav__link">
    存储函数
  </a>
  
    <nav class="md-nav" aria-label="存储函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_80" class="md-nav__link">
    创建存储函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_81" class="md-nav__link">
    调用函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_82" class="md-nav__link">
    删除函数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03_2" class="md-nav__link">
    03触发器
  </a>
  
    <nav class="md-nav" aria-label="03触发器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_83" class="md-nav__link">
    触发器数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insert" class="md-nav__link">
    INSERT型触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    UPDATE型触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    DELETE型触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_84" class="md-nav__link">
    查看触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_85" class="md-nav__link">
    删除触发器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04_1" class="md-nav__link">
    04事务
  </a>
  
    <nav class="md-nav" aria-label="04事务">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_86" class="md-nav__link">
    事务的数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_87" class="md-nav__link">
    未管理事务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_88" class="md-nav__link">
    管理事务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_89" class="md-nav__link">
    事务的提交方式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_90" class="md-nav__link">
    查询和修改事务的隔离级别
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_91" class="md-nav__link">
    脏读的问题演示和解决_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_92" class="md-nav__link">
    脏读的问题演示和解决_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_93" class="md-nav__link">
    不可重复读的问题演示和解决_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_94" class="md-nav__link">
    不可重复读的问题演示和解决_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_95" class="md-nav__link">
    幻读的问题演示和解决_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_96" class="md-nav__link">
    幻读的问题演示和解决_窗口2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day04" class="md-nav__link">
    day04
  </a>
  
    <nav class="md-nav" aria-label="day04">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01_3" class="md-nav__link">
    01存储引擎
  </a>
  
    <nav class="md-nav" aria-label="01存储引擎">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_97" class="md-nav__link">
    查询数据库支持的存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_98" class="md-nav__link">
    查询某个数据库中所有数据表的存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_99" class="md-nav__link">
    查询某个数据库中某个表的存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_100" class="md-nav__link">
    创建数据表指定存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_101" class="md-nav__link">
    修改数据表的存储引擎
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02_3" class="md-nav__link">
    02索引
  </a>
  
    <nav class="md-nav" aria-label="02索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_102" class="md-nav__link">
    索引数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_103" class="md-nav__link">
    创建和查询索引
  </a>
  
    <nav class="md-nav" aria-label="创建和查询索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_104" class="md-nav__link">
    创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_105" class="md-nav__link">
    查询索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter" class="md-nav__link">
    ALTER添加索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_106" class="md-nav__link">
    删除索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_107" class="md-nav__link">
    索引的效率测试
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03_3" class="md-nav__link">
    03锁
  </a>
  
    <nav class="md-nav" aria-label="03锁">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#innodb" class="md-nav__link">
    InnoDB锁的数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_1" class="md-nav__link">
    InnoDB共享锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_2" class="md-nav__link">
    InnoDB共享锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_3" class="md-nav__link">
    InnoDB排他锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_4" class="md-nav__link">
    InnoDB排他锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam" class="md-nav__link">
    MYISAM锁的数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_1" class="md-nav__link">
    MYISAM读锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_2" class="md-nav__link">
    MYISAM读锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_3" class="md-nav__link">
    MYISAM写锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_4" class="md-nav__link">
    MYISAM写锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_108" class="md-nav__link">
    乐观锁
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04_2" class="md-nav__link">
    04主从复制
  </a>
  
    <nav class="md-nav" aria-label="04主从复制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#__5" class="md-nav__link">
    主从复制_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__6" class="md-nav__link">
    主从复制_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#05" class="md-nav__link">
    05读写分离
  </a>
  
    <nav class="md-nav" aria-label="05读写分离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_mycat" class="md-nav__link">
    读写分离_mycat操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__7" class="md-nav__link">
    读写分离_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__8" class="md-nav__link">
    读写分离_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#06" class="md-nav__link">
    06水平拆分
  </a>
  
    <nav class="md-nav" aria-label="06水平拆分">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_mycat_1" class="md-nav__link">
    水平拆分_mycat操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__9" class="md-nav__link">
    水平拆分_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__10" class="md-nav__link">
    水平拆分_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#07" class="md-nav__link">
    07垂直拆分
  </a>
  
    <nav class="md-nav" aria-label="07垂直拆分">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_mycat_2" class="md-nav__link">
    垂直拆分_mycat操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__11" class="md-nav__link">
    垂直拆分_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__12" class="md-nav__link">
    垂直拆分_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../jquery/" class="md-nav__link">
        JQuery
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ajax/" class="md-nav__link">
        AJAX
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Redis
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Redis" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Redis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../redis/day01/" class="md-nav__link">
        day01
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../redis/day02/" class="md-nav__link">
        day02
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Docker
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Docker" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docker/1/" class="md-nav__link">
        初识 Docker
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docker/2/" class="md-nav__link">
        docker命令
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docker/3/" class="md-nav__link">
        docker容器的数据卷
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docker/4/" class="md-nav__link">
        docker部署容器
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docker/5/" class="md-nav__link">
        Docerfile
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docker/6/" class="md-nav__link">
        服务编排
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../docker/7/" class="md-nav__link">
        私有仓库
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../MongoDB/MongoDB/" class="md-nav__link">
        MongoDB
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        项目一-探花交友
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="项目一-探花交友" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          项目一-探花交友
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day01/" class="md-nav__link">
        day01
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day02/" class="md-nav__link">
        day02
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day03/" class="md-nav__link">
        day03
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day04/" class="md-nav__link">
        day04
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day05/" class="md-nav__link">
        day05
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day06/" class="md-nav__link">
        day06
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day07/" class="md-nav__link">
        day07
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day08/" class="md-nav__link">
        day08
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day09/" class="md-nav__link">
        day09
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/day10/" class="md-nav__link">
        day10
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_11" type="checkbox" id="__nav_8_11" >
      
      <label class="md-nav__link" for="__nav_8_11">
        补充资料
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="补充资料" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_11">
          <span class="md-nav__icon md-icon"></span>
          补充资料
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/lombok/" class="md-nav__link">
        day01_lombok
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/mybatisPlus/" class="md-nav__link">
        day01_mybatis_plus
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/aliyun/" class="md-nav__link">
        day01_阿里云
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/sso/" class="md-nav__link">
        day01_单点登录及jwt
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/nginx/" class="md-nav__link">
        day03_nginx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/threadlocal/README.md" class="md-nav__link">
        day03_ThreadLocal
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/mongodb/" class="md-nav__link">
        day04_MongoDB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tantan/further/ansy/" class="md-nav__link">
        day04_多线程@Ansy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      <label class="md-nav__link" for="__nav_9">
        面试
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="面试" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          面试
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../interview/e.g.1.0.0/" class="md-nav__link">
        e.g.1.0.0
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#day01" class="md-nav__link">
    day01
  </a>
  
    <nav class="md-nav" aria-label="day01">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01" class="md-nav__link">
    01操作数据库和数据表
  </a>
  
    <nav class="md-nav" aria-label="01操作数据库和数据表">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    查询所有数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    查询某个数据库的创建语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    创建数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    创建数据库，判断、如果不存在则创建
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    创建数据库、并指定字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    查看数据库的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    修改数据库的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    删除数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    删除数据库，判断、如果存在则删除
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    使用数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    查询当前使用的数据库
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    查询所有数据表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    查询表结构
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    查询数据表的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    创建数据表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    修改表名
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    修改表的字符集
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    给表添加列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    修改表中列的数据类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    修改表中列的名称和数据类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    删除表中的列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    删除表
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    删除表，判断、如果存在则删除
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02" class="md-nav__link">
    02表数据的增删改
  </a>
  
    <nav class="md-nav" aria-label="02表数据的增删改">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    给指定列添加数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    给全部列添加数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    批量添加所有列数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    修改表数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    删除表数据
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03" class="md-nav__link">
    03表数据的查询
  </a>
  
    <nav class="md-nav" aria-label="03表数据的查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    查询全部数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    查询指定列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    去除重复查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    计算列的值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    起别名
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    条件查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    聚合函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    排序查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    分组查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    分页查询
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04" class="md-nav__link">
    04约束
  </a>
  
    <nav class="md-nav" aria-label="04约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    主键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    主键自增约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    唯一约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    非空约束
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day02" class="md-nav__link">
    day02
  </a>
  
    <nav class="md-nav" aria-label="day02">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01_1" class="md-nav__link">
    01约束
  </a>
  
    <nav class="md-nav" aria-label="01约束">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    外键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    删除外键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    建表后单独添加外键约束
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    外键级联操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02_1" class="md-nav__link">
    02多表操作
  </a>
  
    <nav class="md-nav" aria-label="02多表操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    表关系一对一
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    表关系一对多
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    表关系多对多
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    多表查询数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    内连接查询
  </a>
  
    <nav class="md-nav" aria-label="内连接查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    显示内连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    隐式内连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    外连接查询
  </a>
  
    <nav class="md-nav" aria-label="外连接查询">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_55" class="md-nav__link">
    左外连接
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_56" class="md-nav__link">
    右外连接
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_57" class="md-nav__link">
    子查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_58" class="md-nav__link">
    自关联查询
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_59" class="md-nav__link">
    多表查询练习
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03_1" class="md-nav__link">
    03视图
  </a>
  
    <nav class="md-nav" aria-label="03视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_" class="md-nav__link">
    视图_数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_60" class="md-nav__link">
    创建视图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_61" class="md-nav__link">
    查询视图
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day03" class="md-nav__link">
    day03
  </a>
  
    <nav class="md-nav" aria-label="day03">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01_2" class="md-nav__link">
    01视图
  </a>
  
    <nav class="md-nav" aria-label="01视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_62" class="md-nav__link">
    数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_63" class="md-nav__link">
    创建视图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_64" class="md-nav__link">
    查询视图
  </a>
  
    <nav class="md-nav" aria-label="查询视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_65" class="md-nav__link">
    查询视图
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_66" class="md-nav__link">
    查询创建视图的语句
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_67" class="md-nav__link">
    修改视图
  </a>
  
    <nav class="md-nav" aria-label="修改视图">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_68" class="md-nav__link">
    修改视图表数据
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_69" class="md-nav__link">
    修改视图表结构
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_70" class="md-nav__link">
    删除视图
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02_2" class="md-nav__link">
    02存储过程和函数
  </a>
  
    <nav class="md-nav" aria-label="02存储过程和函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_71" class="md-nav__link">
    数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_72" class="md-nav__link">
    创建存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_73" class="md-nav__link">
    调用存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_74" class="md-nav__link">
    查询数据库中所有的存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_75" class="md-nav__link">
    查看存储过程的状态信息
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_76" class="md-nav__link">
    查看存储过程的创建语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_77" class="md-nav__link">
    删除存储过程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    存储过程-变量
  </a>
  
    <nav class="md-nav" aria-label="存储过程-变量">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_78" class="md-nav__link">
    定义变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-_1" class="md-nav__link">
    变量赋值-方式一
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-if" class="md-nav__link">
    存储过程-if语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__1" class="md-nav__link">
    存储过程_输入参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__2" class="md-nav__link">
    存储过程_输出参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_case" class="md-nav__link">
    存储过程_case语句
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_while" class="md-nav__link">
    存储过程_while循环
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_repeat" class="md-nav__link">
    存储过程_repeat循环
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_loop" class="md-nav__link">
    存储过程_loop循环
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__3" class="md-nav__link">
    存储过程_游标
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__4" class="md-nav__link">
    存储过程_游标优化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_79" class="md-nav__link">
    存储函数
  </a>
  
    <nav class="md-nav" aria-label="存储函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_80" class="md-nav__link">
    创建存储函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_81" class="md-nav__link">
    调用函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_82" class="md-nav__link">
    删除函数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03_2" class="md-nav__link">
    03触发器
  </a>
  
    <nav class="md-nav" aria-label="03触发器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_83" class="md-nav__link">
    触发器数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#insert" class="md-nav__link">
    INSERT型触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    UPDATE型触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    DELETE型触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_84" class="md-nav__link">
    查看触发器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_85" class="md-nav__link">
    删除触发器
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04_1" class="md-nav__link">
    04事务
  </a>
  
    <nav class="md-nav" aria-label="04事务">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_86" class="md-nav__link">
    事务的数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_87" class="md-nav__link">
    未管理事务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_88" class="md-nav__link">
    管理事务
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_89" class="md-nav__link">
    事务的提交方式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_90" class="md-nav__link">
    查询和修改事务的隔离级别
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_91" class="md-nav__link">
    脏读的问题演示和解决_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_92" class="md-nav__link">
    脏读的问题演示和解决_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_93" class="md-nav__link">
    不可重复读的问题演示和解决_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_94" class="md-nav__link">
    不可重复读的问题演示和解决_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_95" class="md-nav__link">
    幻读的问题演示和解决_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_96" class="md-nav__link">
    幻读的问题演示和解决_窗口2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#day04" class="md-nav__link">
    day04
  </a>
  
    <nav class="md-nav" aria-label="day04">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01_3" class="md-nav__link">
    01存储引擎
  </a>
  
    <nav class="md-nav" aria-label="01存储引擎">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_97" class="md-nav__link">
    查询数据库支持的存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_98" class="md-nav__link">
    查询某个数据库中所有数据表的存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_99" class="md-nav__link">
    查询某个数据库中某个表的存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_100" class="md-nav__link">
    创建数据表指定存储引擎
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_101" class="md-nav__link">
    修改数据表的存储引擎
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02_3" class="md-nav__link">
    02索引
  </a>
  
    <nav class="md-nav" aria-label="02索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_102" class="md-nav__link">
    索引数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_103" class="md-nav__link">
    创建和查询索引
  </a>
  
    <nav class="md-nav" aria-label="创建和查询索引">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_104" class="md-nav__link">
    创建索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_105" class="md-nav__link">
    查询索引
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alter" class="md-nav__link">
    ALTER添加索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_106" class="md-nav__link">
    删除索引
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_107" class="md-nav__link">
    索引的效率测试
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03_3" class="md-nav__link">
    03锁
  </a>
  
    <nav class="md-nav" aria-label="03锁">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#innodb" class="md-nav__link">
    InnoDB锁的数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_1" class="md-nav__link">
    InnoDB共享锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_2" class="md-nav__link">
    InnoDB共享锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_3" class="md-nav__link">
    InnoDB排他锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#innodb_4" class="md-nav__link">
    InnoDB排他锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam" class="md-nav__link">
    MYISAM锁的数据准备
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_1" class="md-nav__link">
    MYISAM读锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_2" class="md-nav__link">
    MYISAM读锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_3" class="md-nav__link">
    MYISAM写锁_窗口1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam_4" class="md-nav__link">
    MYISAM写锁_窗口2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_108" class="md-nav__link">
    乐观锁
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04_2" class="md-nav__link">
    04主从复制
  </a>
  
    <nav class="md-nav" aria-label="04主从复制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#__5" class="md-nav__link">
    主从复制_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__6" class="md-nav__link">
    主从复制_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#05" class="md-nav__link">
    05读写分离
  </a>
  
    <nav class="md-nav" aria-label="05读写分离">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_mycat" class="md-nav__link">
    读写分离_mycat操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__7" class="md-nav__link">
    读写分离_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__8" class="md-nav__link">
    读写分离_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#06" class="md-nav__link">
    06水平拆分
  </a>
  
    <nav class="md-nav" aria-label="06水平拆分">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_mycat_1" class="md-nav__link">
    水平拆分_mycat操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__9" class="md-nav__link">
    水平拆分_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__10" class="md-nav__link">
    水平拆分_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#07" class="md-nav__link">
    07垂直拆分
  </a>
  
    <nav class="md-nav" aria-label="07垂直拆分">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_mycat_2" class="md-nav__link">
    垂直拆分_mycat操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__11" class="md-nav__link">
    垂直拆分_主服务器操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#__12" class="md-nav__link">
    垂直拆分_从服务器操作
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Zfqwb/mkdocs/edit/main/docs_sample/MySQL.md" title="编辑此页" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="mysql">MySQL 参考手册<a class="headerlink" href="#mysql" title="Permanent link">&para;</a></h1>
<blockquote>
<p>Reference Manual</p>
</blockquote>
<h2 id="day01">day01<a class="headerlink" href="#day01" title="Permanent link">&para;</a></h2>
<h3 id="01">01操作数据库和数据表<a class="headerlink" href="#01" title="Permanent link">&para;</a></h3>
<h4 id="_1">查询所有数据库<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SHOW DATABASES;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_2">查询某个数据库的创建语句<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SHOW CREATE DATABASE 数据库名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_3">创建数据库<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        CREATE DATABASE 数据库名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_4">创建数据库，判断、如果不存在则创建<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        CREATE DATABASE IF NOT EXISTS 数据库名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_5">创建数据库、并指定字符集<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        CREATE DATABASE 数据库名称 CHARACTER SET 字符集名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_6">查看数据库的字符集<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="k">SHOW</span> <span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="err">数据库名称</span><span class="p">;</span>
</code></pre></div>

<h4 id="_7">修改数据库的字符集<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*  </span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER DATABASE 数据库名称 CHARACTER SET 字符集名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_8">删除数据库<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        DROP DATABASE 数据库名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_9">删除数据库，判断、如果存在则删除<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        DROP DATABASE IF EXISTS 数据库名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_10">使用数据库<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        USE 数据库名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_11">查询当前使用的数据库<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT DATABASE();</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_12">查询所有数据表<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SHOW TABLES;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_13">查询表结构<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        DESC 表名;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_14">查询数据表的字符集<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SHOW TABLE STATUS FROM 数据库名称 LIKE &#39;表名&#39;;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_15">创建数据表<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        CREATE TABLE 表名(</span>
<span class="cm">            列名 数据类型 约束,</span>
<span class="cm">            列名 数据类型 约束,</span>
<span class="cm">            ...</span>
<span class="cm">            列名 数据类型 约束</span>
<span class="cm">        );</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_16">修改表名<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 旧表名 RENAME TO 新表名;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_17">修改表的字符集<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 表名 CHARACTER SET 字符集名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h4 id="_18">给表添加列<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 表名 ADD 列名 数据类型;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_19">修改表中列的数据类型<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 表名 MODIFY 列名 数据类型;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_20">修改表中列的名称和数据类型<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 表名 CHANGE 旧列名 新列名 数据类型;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_21">删除表中的列<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 表名 DROP 列名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_22">删除表<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        DROP TABLE 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_23">删除表，判断、如果存在则删除<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        DROP TABLE IF EXISTS 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h3 id="02">02表数据的增删改<a class="headerlink" href="#02" title="Permanent link">&para;</a></h3>
<h4 id="_24">给指定列添加数据<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        INSERT INTO 表名(列名1,列名2,...) VALUES (值1,值2,...);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_25">给全部列添加数据<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        INSERT INTO 表名 VALUES (值1,值2,值3,...);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_26">批量添加所有列数据<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        INSERT INTO 表名 VALUES (值1,值2,值3,...),(值1,值2,值3,...),(值1,值2,值3,...);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_27">修改表数据<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        UPDATE 表名 SET 列名1 = 值1,列名2 = 值2,... [where 条件];</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_28">删除表数据<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        DELETE FROM 表名 [WHERE 条件];</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h3 id="03">03表数据的查询<a class="headerlink" href="#03" title="Permanent link">&para;</a></h3>
<h4 id="_29">查询全部数据<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT * FROM 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_30">查询指定列<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名1,列名2,... FROM 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_31">去除重复查询<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT DISTINCT 列名1,列名2,... FROM 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_32">计算列的值<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名1 运算符(+ - * /) 列名2 FROM 表名;</span>
<span class="cm">        如果某一列为null，可以进行替换</span>
<span class="cm">        ifnull(表达式1,表达式2)</span>
<span class="cm">        表达式1：想替换的列</span>
<span class="cm">        表达式2：想替换的值</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>example</code></p>
<p>-- 查询商品名称和库存，库存数量在原有基础上加10</p>
<div class="codehilite"><pre><span></span><code>SELECT NAME,stock+10 FROM product;
</code></pre></div>

<p>-- 查询商品名称和库存，库存数量在原有基础上加10。进行null值判断</p>
<div class="codehilite"><pre><span></span><code>SELECT NAME,IFNULL(stock,0)+10 FROM product;
</code></pre></div>

<h4 id="_33">起别名<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名1,列名2,... AS 别名 FROM 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><em>as可以省略</em></p>
<h4 id="_34">条件查询<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名列表 FROM 表名 WHERE 条件;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>example</code></p>
<div class="codehilite"><pre><span></span><code>-- 查询库存大于20的商品信息
SELECT * FROM product WHERE stock &gt; 20;

-- 查询品牌为华为的商品信息
SELECT * FROM product WHERE brand=&#39;华为&#39;;

-- 查询金额在4000 ~ 6000之间的商品信息
SELECT * FROM product WHERE price &gt;= 4000 AND price &lt;= 6000;
SELECT * FROM product WHERE price BETWEEN 4000 AND 6000;


-- 查询库存为14、30、23的商品信息
SELECT * FROM product WHERE stock=14 OR stock=30 OR stock=23;
SELECT * FROM product WHERE stock IN(14,30,23);

-- 查询库存为null的商品信息
SELECT * FROM product WHERE stock IS NULL;

-- 查询库存不为null的商品信息
SELECT * FROM product WHERE stock IS NOT NULL;


-- 查询名称以小米为开头的商品信息
SELECT * FROM product WHERE NAME LIKE &#39;小米%&#39;;

-- 查询名称第二个字是为的商品信息
SELECT * FROM product WHERE NAME LIKE &#39;_为%&#39;;

-- 查询名称为四个字符的商品信息
SELECT * FROM product WHERE NAME LIKE &#39;____&#39;;

-- 查询名称中包含电脑的商品信息
SELECT * FROM product WHERE NAME LIKE &#39;%电脑%&#39;;
</code></pre></div>

<h4 id="_35">聚合函数<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 函数名(列名) FROM 表名 [WHERE 条件];</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>example</code></p>
<div class="codehilite"><pre><span></span><code>-- 计算product表中总记录条数
SELECT COUNT(*) FROM product;

-- 获取最高价格
SELECT MAX(price) FROM product;


-- 获取最低库存
SELECT MIN(stock) FROM product;


-- 获取总库存数量
SELECT SUM(stock) FROM product;


-- 获取品牌为苹果的总库存数量
SELECT SUM(stock) FROM product WHERE brand=&#39;苹果&#39;;

-- 获取品牌为小米的平均商品价格
SELECT AVG(price) FROM product WHERE brand=&#39;小米&#39;;
</code></pre></div>

<h4 id="_36">排序查询<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名 [WHERE 条件] ORDER BY 列名1 排序方式1,列名2 排序方式2;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>example</code></p>
<div class="codehilite"><pre><span></span><code>-- 按照库存升序排序
SELECT * FROM product ORDER BY stock ASC;

-- 查询名称中包含手机的商品信息。按照金额降序排序
SELECT * FROM product WHERE NAME LIKE &#39;%手机%&#39; ORDER BY price DESC;

-- 按照金额升序排序，如果金额相同，按照库存降序排列
SELECT * FROM product ORDER BY price ASC,stock DESC;
</code></pre></div>

<h4 id="_37">分组查询<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名 [WHERE 条件] GROUP BY 分组列名 [HAVING 分组后条件过滤] [ORDER BY 排序列名 排序方式];</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_38">分页查询<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名 </span>
<span class="cm">        [WHERE 条件] </span>
<span class="cm">        [GROUP BY 分组列名]</span>
<span class="cm">        [HAVING 分组后条件过滤] </span>
<span class="cm">        [ORDER BY 排序列名 排序方式] </span>
<span class="cm">        LIMIT 当前页数,每页显示的条数;</span>


<span class="cm">    LIMIT 当前页数,每页显示的条数;</span>
<span class="cm">    公式：当前页数 = (当前页数-1) * 每页显示的条数</span>

<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>example</code></p>
<div class="codehilite"><pre><span></span><code>-- 每页显示3条数据

-- 第1页  当前页数=(1-1) * 3
SELECT * FROM product LIMIT 0,3;

-- 第2页  当前页数=(2-1) * 3
SELECT * FROM product LIMIT 3,3;

-- 第3页  当前页数=(3-1) * 3
SELECT * FROM product LIMIT 6,3;
</code></pre></div>

<h3 id="04">04约束<a class="headerlink" href="#04" title="Permanent link">&para;</a></h3>
<h4 id="_39">主键约束<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建学生表(编号、姓名、年龄)  编号设为主键
CREATE TABLE student(
    id INT PRIMARY KEY,
    NAME VARCHAR(30),
    age INT
);

-- 查询学生表的详细信息
DESC student;

-- 添加数据
INSERT INTO student VALUES (1,&#39;张三&#39;,23);
INSERT INTO student VALUES (2,&#39;李四&#39;,24);

-- 删除主键
ALTER TABLE student DROP PRIMARY KEY;

-- 建表后单独添加主键约束
ALTER TABLE student MODIFY id INT PRIMARY KEY;
</code></pre></div>

<h4 id="_40">主键自增约束<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建学生表(编号、姓名、年龄)  编号设为主键自增
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(30),
    age INT
);

-- 查询学生表的详细信息
DESC student;

-- 添加数据
INSERT INTO student VALUES (NULL,&#39;张三&#39;,23),(NULL,&#39;李四&#39;,24);

-- 删除自增约束
ALTER TABLE student MODIFY id INT;
INSERT INTO student VALUES (NULL,&#39;张三&#39;,23);

-- 建表后单独添加自增约束
ALTER TABLE student MODIFY id INT AUTO_INCREMENT;
</code></pre></div>

<h4 id="_41">唯一约束<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建学生表(编号、姓名、年龄)  编号设为主键自增，年龄设为唯一
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(30),
    age INT UNIQUE
);

-- 查询学生表的详细信息
DESC student;

-- 添加数据
INSERT INTO student VALUES (NULL,&#39;张三&#39;,23);
INSERT INTO student VALUES (NULL,&#39;李四&#39;,23);

-- 删除唯一约束
ALTER TABLE student DROP INDEX age;

-- 建表后单独添加唯一约束
ALTER TABLE student MODIFY age INT UNIQUE;
</code></pre></div>

<h4 id="_42">非空约束<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建学生表(编号、姓名、年龄)  编号设为主键自增，姓名设为非空，年龄设为唯一
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(30) NOT NULL,
    age INT UNIQUE
);

-- 查询学生表的详细信息
DESC student;

-- 添加数据
INSERT INTO student VALUES (NULL,&#39;张三&#39;,23);

-- 删除非空约束
ALTER TABLE student MODIFY NAME VARCHAR(30);
INSERT INTO student VALUES (NULL,NULL,25);

-- 建表后单独添加非空约束
ALTER TABLE student MODIFY NAME VARCHAR(30) NOT NULL;
</code></pre></div>

<h2 id="day02">day02<a class="headerlink" href="#day02" title="Permanent link">&para;</a></h2>
<h3 id="01_1">01约束<a class="headerlink" href="#01_1" title="Permanent link">&para;</a></h3>
<h4 id="_43">外键约束<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主表主键列名)</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_44">删除外键约束<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 表名 DROP FOREIGN KEY 外键名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_45">建表后单独添加外键约束<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主键列名);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>外键约束example</code></p>
<div class="codehilite"><pre><span></span><code>-- 创建db2数据库
CREATE DATABASE db2;

-- 使用db2数据库
USE db2;

/*
    外键约束
    标准语法：
        CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主表主键列名)
*/
-- 建表时添加外键约束
-- 创建user用户表
CREATE TABLE USER(
    id INT PRIMARY KEY AUTO_INCREMENT,    -- id
    NAME VARCHAR(20) NOT NULL             -- 姓名
);
-- 添加用户数据
INSERT INTO USER VALUES (NULL,&#39;张三&#39;),(NULL,&#39;李四&#39;);


-- 创建orderlist订单表
CREATE TABLE orderlist(
    id INT PRIMARY KEY AUTO_INCREMENT,    -- id
    number VARCHAR(20) NOT NULL,          -- 订单编号
    uid INT,                  -- 外键列
    CONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id)
);
-- 添加订单数据
INSERT INTO orderlist VALUES (NULL,&#39;hm001&#39;,1),(NULL,&#39;hm002&#39;,1),
(NULL,&#39;hm003&#39;,2),(NULL,&#39;hm004&#39;,2);


-- 添加一个订单，但是没有真实用户。添加失败
INSERT INTO orderlist VALUES (NULL,&#39;hm005&#39;,3);

-- 删除李四用户。删除失败
DELETE FROM USER WHERE NAME=&#39;李四&#39;;



/*
    删除外键约束
    标准语法：
        ALTER TABLE 表名 DROP FOREIGN KEY 外键名;
*/
-- 删除外键约束
ALTER TABLE orderlist DROP FOREIGN KEY ou_fk1;



/*
    建表后单独添加外键约束
    标准语法：
        ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主键列名);
*/
-- 添加外键约束
ALTER TABLE orderlist ADD CONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id);
</code></pre></div>

<h4 id="_46">外键级联操作<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    添加外键约束，同时添加级联更新  标准语法：</span>
<span class="cm">    ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主键列名) </span>
<span class="cm">    ON UPDATE CASCADE;</span>

<span class="cm">    添加外键约束，同时添加级联删除  标准语法：</span>
<span class="cm">    ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主键列名) </span>
<span class="cm">    ON DELETE CASCADE;</span>

<span class="cm">    添加外键约束，同时添加级联更新和级联删除  标准语法：</span>
<span class="cm">    ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主键列名) </span>
<span class="cm">    ON UPDATE CASCADE ON DELETE CASCADE;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>外键级联操作example</code></p>
<div class="codehilite"><pre><span></span><code>-- 删除外键约束
ALTER TABLE orderlist DROP FOREIGN KEY ou_fk1;

-- 添加外键约束，同时添加级联更新和级联删除
ALTER TABLE orderlist ADD CONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id)
ON UPDATE CASCADE ON DELETE CASCADE;


-- 将李四这个用户的id修改为3,订单表中的uid也自动修改
UPDATE USER SET id=3 WHERE id=2;

-- 将李四这个用户删除,订单表中的该用户所属的订单也自动删除
DELETE FROM USER WHERE id=3;
</code></pre></div>

<h3 id="02_1">02多表操作<a class="headerlink" href="#02_1" title="Permanent link">&para;</a></h3>
<h4 id="_47">表关系一对一<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db3数据库
CREATE DATABASE db3;

-- 使用db3数据库
USE db3;

-- 创建person表
CREATE TABLE person(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    NAME VARCHAR(20)                        -- 姓名
);
-- 添加数据
INSERT INTO person VALUES (NULL,&#39;张三&#39;),(NULL,&#39;李四&#39;);

-- 创建card表
CREATE TABLE card(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    number VARCHAR(20) UNIQUE NOT NULL, -- 身份证号
    pid INT UNIQUE,                         -- 外键列
    CONSTRAINT cp_fk1 FOREIGN KEY (pid) REFERENCES person(id)
);
-- 添加数据
INSERT INTO card VALUES (NULL,&#39;12345&#39;,1),(NULL,&#39;56789&#39;,2);
</code></pre></div>

<h4 id="_48">表关系一对多<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建user表
CREATE TABLE USER(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    NAME VARCHAR(20)                        -- 姓名
);
-- 添加数据
INSERT INTO USER VALUES (NULL,&#39;张三&#39;),(NULL,&#39;李四&#39;);

-- 创建orderlist表
CREATE TABLE orderlist(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    number VARCHAR(20),                     -- 订单编号
    uid INT,                -- 外键列
    CONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id)
);
-- 添加数据
INSERT INTO orderlist VALUES (NULL,&#39;hm001&#39;,1),(NULL,&#39;hm002&#39;,1),(NULL,&#39;hm003&#39;,2),(NULL,&#39;hm004&#39;,2);



/*
    商品分类和商品
*/
-- 创建category表
CREATE TABLE category(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    NAME VARCHAR(10)                        -- 分类名称
);
-- 添加数据
INSERT INTO category VALUES (NULL,&#39;手机数码&#39;),(NULL,&#39;电脑办公&#39;);

-- 创建product表
CREATE TABLE product(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    NAME VARCHAR(30),           -- 商品名称
    cid INT,                -- 外键列
    CONSTRAINT pc_fk1 FOREIGN KEY (cid) REFERENCES category(id)
);
-- 添加数据
INSERT INTO product VALUES (NULL,&#39;华为P30&#39;,1),(NULL,&#39;小米note3&#39;,1),
(NULL,&#39;联想电脑&#39;,2),(NULL,&#39;苹果电脑&#39;,2);
</code></pre></div>

<h4 id="_49">表关系多对多<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建student表
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    NAME VARCHAR(20)            -- 学生姓名
);
-- 添加数据
INSERT INTO student VALUES (NULL,&#39;张三&#39;),(NULL,&#39;李四&#39;);

-- 创建course表
CREATE TABLE course(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    NAME VARCHAR(10)            -- 课程名称
);
-- 添加数据
INSERT INTO course VALUES (NULL,&#39;语文&#39;),(NULL,&#39;数学&#39;);


-- 创建中间表
CREATE TABLE stu_course(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 主键id
    sid INT,  -- 用于和student表中的id进行外键关联
    cid INT,  -- 用于和course表中的id进行外键关联
    CONSTRAINT sc_fk1 FOREIGN KEY (sid) REFERENCES student(id), -- 添加外键约束
    CONSTRAINT sc_fk2 FOREIGN KEY (cid) REFERENCES course(id)   -- 添加外键约束
);
-- 添加数据
INSERT INTO stu_course VALUES (NULL,1,1),(NULL,1,2),(NULL,2,1),(NULL,2,2);
</code></pre></div>

<h4 id="_50"><code>多表查询数据准备</code><a class="headerlink" href="#_50" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db4数据库
CREATE DATABASE db4;
-- 使用db4数据库
USE db4;

-- 创建user表
CREATE TABLE USER(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 用户id
    NAME VARCHAR(20),           -- 用户姓名
    age INT                                 -- 用户年龄
);
-- 添加数据
INSERT INTO USER VALUES (1,&#39;张三&#39;,23);
INSERT INTO USER VALUES (2,&#39;李四&#39;,24);
INSERT INTO USER VALUES (3,&#39;王五&#39;,25);
INSERT INTO USER VALUES (4,&#39;赵六&#39;,26);


-- 订单表
CREATE TABLE orderlist(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 订单id
    number VARCHAR(30),         -- 订单编号
    uid INT,    -- 外键字段
    CONSTRAINT ou_fk1 FOREIGN KEY (uid) REFERENCES USER(id)
);
-- 添加数据
INSERT INTO orderlist VALUES (1,&#39;hm001&#39;,1);
INSERT INTO orderlist VALUES (2,&#39;hm002&#39;,1);
INSERT INTO orderlist VALUES (3,&#39;hm003&#39;,2);
INSERT INTO orderlist VALUES (4,&#39;hm004&#39;,2);
INSERT INTO orderlist VALUES (5,&#39;hm005&#39;,3);
INSERT INTO orderlist VALUES (6,&#39;hm006&#39;,3);
INSERT INTO orderlist VALUES (7,&#39;hm007&#39;,NULL);


-- 商品分类表
CREATE TABLE category(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 商品分类id
    NAME VARCHAR(10)                    -- 商品分类名称
);
-- 添加数据
INSERT INTO category VALUES (1,&#39;手机数码&#39;);
INSERT INTO category VALUES (2,&#39;电脑办公&#39;);
INSERT INTO category VALUES (3,&#39;烟酒茶糖&#39;);
INSERT INTO category VALUES (4,&#39;鞋靴箱包&#39;);


-- 商品表
CREATE TABLE product(
    id INT PRIMARY KEY AUTO_INCREMENT,   -- 商品id
    NAME VARCHAR(30),                    -- 商品名称
    cid INT, -- 外键字段
    CONSTRAINT cp_fk1 FOREIGN KEY (cid) REFERENCES category(id)
);
-- 添加数据
INSERT INTO product VALUES (1,&#39;华为手机&#39;,1);
INSERT INTO product VALUES (2,&#39;小米手机&#39;,1);
INSERT INTO product VALUES (3,&#39;联想电脑&#39;,2);
INSERT INTO product VALUES (4,&#39;苹果电脑&#39;,2);
INSERT INTO product VALUES (5,&#39;中华香烟&#39;,3);
INSERT INTO product VALUES (6,&#39;玉溪香烟&#39;,3);
INSERT INTO product VALUES (7,&#39;计生用品&#39;,NULL);


-- 中间表
CREATE TABLE us_pro(
    upid INT PRIMARY KEY AUTO_INCREMENT,  -- 中间表id
    uid INT, -- 外键字段。需要和用户表的主键产生关联
    pid INT, -- 外键字段。需要和商品表的主键产生关联
    CONSTRAINT up_fk1 FOREIGN KEY (uid) REFERENCES USER(id),
    CONSTRAINT up_fk2 FOREIGN KEY (pid) REFERENCES product(id)
);
-- 添加数据
INSERT INTO us_pro VALUES (NULL,1,1);
INSERT INTO us_pro VALUES (NULL,1,2);
INSERT INTO us_pro VALUES (NULL,1,3);
INSERT INTO us_pro VALUES (NULL,1,4);
INSERT INTO us_pro VALUES (NULL,1,5);
INSERT INTO us_pro VALUES (NULL,1,6);
INSERT INTO us_pro VALUES (NULL,1,7);
INSERT INTO us_pro VALUES (NULL,2,1);
INSERT INTO us_pro VALUES (NULL,2,2);
INSERT INTO us_pro VALUES (NULL,2,3);
INSERT INTO us_pro VALUES (NULL,2,4);
INSERT INTO us_pro VALUES (NULL,2,5);
INSERT INTO us_pro VALUES (NULL,2,6);
INSERT INTO us_pro VALUES (NULL,2,7);
INSERT INTO us_pro VALUES (NULL,3,1);
INSERT INTO us_pro VALUES (NULL,3,2);
INSERT INTO us_pro VALUES (NULL,3,3);
INSERT INTO us_pro VALUES (NULL,3,4);
INSERT INTO us_pro VALUES (NULL,3,5);
INSERT INTO us_pro VALUES (NULL,3,6);
INSERT INTO us_pro VALUES (NULL,3,7);
INSERT INTO us_pro VALUES (NULL,4,1);
INSERT INTO us_pro VALUES (NULL,4,2);
INSERT INTO us_pro VALUES (NULL,4,3);
INSERT INTO us_pro VALUES (NULL,4,4);
INSERT INTO us_pro VALUES (NULL,4,5);
INSERT INTO us_pro VALUES (NULL,4,6);
INSERT INTO us_pro VALUES (NULL,4,7);
</code></pre></div>

<h4 id="_51">内连接查询<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<h5 id="_52">显示内连接<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名1 [INNER] JOIN 表名2 ON 关联条件;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h5 id="_53">隐式内连接<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名1,表名2 WHERE 关联条件;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_54">外连接查询<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h4>
<h5 id="_55">左外连接<a class="headerlink" href="#_55" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名1 LEFT [OUTER] JOIN 表名2 ON 条件;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h5 id="_56">右外连接<a class="headerlink" href="#_56" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名1 RIGHT [OUTER] JOIN 表名2 ON 条件;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_57">子查询<a class="headerlink" href="#_57" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    结果是单行单列的</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名 WHERE 列名=(SELECT 列名 FROM 表名 [WHERE 条件]);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查询年龄最高的用户姓名
SELECT MAX(age) FROM USER;
SELECT NAME,age FROM USER WHERE age=(SELECT MAX(age) FROM USER);</p>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    结果是多行单列的</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名 WHERE 列名 [NOT] IN (SELECT 列名 FROM 表名 [WHERE 条件]); </span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查询张三和李四的订单信息
SELECT * FROM orderlist WHERE uid IN (1,2);
SELECT id FROM USER WHERE NAME IN ('张三','李四');
SELECT * FROM orderlist WHERE uid IN (SELECT id FROM USER WHERE NAME IN ('张三','李四'));</p>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    结果是多行多列的</span>
<span class="cm">    标准语法：</span>
<span class="cm">        SELECT 列名 FROM 表名 [别名],(SELECT 列名 FROM 表名 [WHERE 条件]) [别名] [WHERE 条件];</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查询订单表中id大于4的订单信息和所属用户信息
SELECT * FROM orderlist WHERE id &gt; 4;
SELECT
    u.name,
    o.number
FROM
    USER u,
    (SELECT * FROM orderlist WHERE id &gt; 4) o
WHERE
    o.uid=u.id;</p>
<h4 id="_58">自关联查询<a class="headerlink" href="#_58" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建员工表
CREATE TABLE employee(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 员工编号
    NAME VARCHAR(20),           -- 员工姓名
    mgr INT,                -- 上级编号
    salary DOUBLE               -- 员工工资
);
-- 添加数据
INSERT INTO employee VALUES (1001,&#39;孙悟空&#39;,1005,9000.00),
(1002,&#39;猪八戒&#39;,1005,8000.00),
(1003,&#39;沙和尚&#39;,1005,8500.00),
(1004,&#39;小白龙&#39;,1005,7900.00),
(1005,&#39;唐僧&#39;,NULL,15000.00),
(1006,&#39;武松&#39;,1009,7600.00),
(1007,&#39;李逵&#39;,1009,7400.00),
(1008,&#39;林冲&#39;,1009,8100.00),
(1009,&#39;宋江&#39;,NULL,16000.00);


-- 查询所有员工的姓名及其直接上级的姓名，没有上级的员工也需要查询
/*
分析
    员工信息 employee表
    条件：employee.mgr = employee.id
    查询左表的全部数据，和左右两张表有交集部分数据，左外连接
*/
SELECT
    e1.id,
    e1.name,
    e1.mgr,
    e2.id,
    e2.name
FROM
    employee e1
LEFT OUTER JOIN
    employee e2
ON
    e1.mgr = e2.id;
</code></pre></div>

<h4 id="_59">多表查询练习<a class="headerlink" href="#_59" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 1.查询用户的编号、姓名、年龄。订单编号
/*
分析
    用户的编号、姓名、年龄  user表      订单编号 orderlist表
    条件：user.id=orderlist.uid
*/
SELECT
    u.id,
    u.name,
    u.age,
    o.number
FROM
    USER u,
    orderlist o
WHERE
    u.id=o.uid;



-- 2.查询所有的用户。用户的编号、姓名、年龄。订单编号
/*
分析
    用户的编号、姓名、年龄  user表    订单编号 orderlist表
    条件：user.id=orderlist.uid
    查询所有的用户，左外连接
*/
SELECT
    u.id,
    u.name,
    u.age,
    o.number
FROM
    USER u
LEFT OUTER JOIN
    orderlist o
ON
    u.id=o.uid;



-- 3.查询所有的订单。用户的编号、姓名、年龄。订单编号
/*
分析
    用户的编号、姓名、年龄 user表    订单编号 orderlist表
    条件：user.id=orderlist.uid
    查询所有的订单，右外连接
*/
SELECT
    u.id,
    u.name,
    u.age,
    o.number
FROM
    USER u
RIGHT OUTER JOIN
    orderlist o
ON
    u.id=o.uid;



-- 4.查询用户年龄大于23岁的信息。显示用户的编号、姓名、年龄。订单编号
/*
分析
    用户的编号、姓名、年龄 user表    订单编号 orderlist表
    条件：user.id=orderlist.uid AND user.age &gt; 23
*/
SELECT
    u.id,
    u.name,
    u.age,
    o.number
FROM
    USER u,
    orderlist o
WHERE
    u.id=o.uid
    AND
    u.age &gt; 23;


-- 5.查询张三和李四用户的信息。显示用户的编号、姓名、年龄。订单编号
/*
分析
    用户的编号、姓名、年龄 user表   订单编号 orderlist表
    条件：user.id=orderlist.uid AND user.name IN (&#39;张三&#39;,&#39;李四&#39;)
*/
SELECT
    u.id,
    u.name,
    u.age,
    o.number
FROM
    USER u,
    orderlist o
WHERE
    u.id=o.uid
    AND
    u.name IN (&#39;张三&#39;,&#39;李四&#39;);


-- 6.查询商品分类的编号、分类名称。分类下的商品名称
/*
分析
    商品分类的编号、分类名称 category表    商品名称 product表
    条件：category.id=product.cid
*/
SELECT
    c.id,
    c.name,
    p.name
FROM
    category c,
    product p
WHERE
    c.id=p.cid;


-- 7.查询所有的商品分类。商品分类的编号、分类名称。分类下的商品名称
/*
分析
    商品分类的编号、分类名称 category表    商品名称 product表
    条件：category.id=product.cid
    查询所有的商品分类，左外连接
*/
SELECT
    c.id,
    c.name,
    p.name
FROM
    category c
LEFT OUTER JOIN
    product p
ON
    c.id=p.cid;


-- 8.查询所有的商品信息。商品分类的编号、分类名称。分类下的商品名称
/*
分析
    商品分类的编号、分类名称  category表   商品名称 product表
    条件：category.id=product.cid
    查询所有的商品信息，右外连接
*/
SELECT
    c.id,
    c.name,
    p.name
FROM
    category c
RIGHT OUTER JOIN
    product p
ON
    c.id=p.cid;



-- 9.查询所有的用户和该用户能查看的所有的商品。显示用户的编号、姓名、年龄。商品名称
/*
分析
    用户的编号、姓名、年龄 user表   商品名称 product表    中间表 us_pro
    条件：us_pro.uid=user.id AND us_pro.pid=product.id
*/
SELECT
    u.id,
    u.name,
    u.age,
    p.name
FROM
    USER u,
    product p,
    us_pro up
WHERE
    up.uid=u.id
    AND
    up.pid=p.id;



-- 10.查询张三和李四这两个用户可以看到的商品。显示用户的编号、姓名、年龄。商品名称
/*
分析
    用户的编号、姓名、年龄 user表   商品名称 product表   中间表 us_pro
    条件：us_pro.uid=user.id AND us_pro.pid=product.id AND user.name IN (&#39;张三&#39;,&#39;李四&#39;) 
*/
SELECT
    u.id,
    u.name,
    u.age,
    p.name
FROM
    USER u,
    product p,
    us_pro up
WHERE
    up.uid=u.id
    AND
    up.pid=p.id
    AND
    u.name IN (&#39;张三&#39;,&#39;李四&#39;);
</code></pre></div>

<h3 id="03_1">03视图<a class="headerlink" href="#03_1" title="Permanent link">&para;</a></h3>
<h4 id="_">视图_数据准备<a class="headerlink" href="#_" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db5数据库
CREATE DATABASE db5;

-- 使用db5数据库
USE db5;

-- 创建country表
CREATE TABLE country(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 国家id
    NAME VARCHAR(30)                        -- 国家名称
);
-- 添加数据
INSERT INTO country VALUES (NULL,&#39;中国&#39;),(NULL,&#39;美国&#39;),(NULL,&#39;俄罗斯&#39;);

-- 创建city表
CREATE TABLE city(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 城市id
    NAME VARCHAR(30),           -- 城市名称
    cid INT, -- 外键列。关联country表的主键列id
    CONSTRAINT cc_fk1 FOREIGN KEY (cid) REFERENCES country(id)  -- 添加外键约束
);
-- 添加数据
INSERT INTO city VALUES (NULL,&#39;北京&#39;,1),(NULL,&#39;上海&#39;,1),(NULL,&#39;纽约&#39;,2),(NULL,&#39;莫斯科&#39;,3);
</code></pre></div>

<h4 id="_60">创建视图<a class="headerlink" href="#_60" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>

<span class="cm">  标准语法</span>

<span class="cm">    CREATE VIEW 视图名称 [(列名列表)] AS 查询语句;</span>

<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>example</code></p>
<div class="codehilite"><pre><span></span><code>-- 创建city_country视图，保存城市和国家的信息(使用指定列名)

CREATE VIEW city_country (city_id,city_name,country_name) AS

SELECT

  c1.id,

  c1.name,

  c2.name

FROM

  city c1,

  country c2

WHERE

  c1.cid=c2.id;
</code></pre></div>

<h4 id="_61">查询视图<a class="headerlink" href="#_61" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>

<span class="cm">  标准语法</span>

<span class="cm">    SELECT * FROM 视图名称;</span>

<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p><code>example</code></p>
<div class="codehilite"><pre><span></span><code>-- 查询视图

SELECT * FROM city_country;
</code></pre></div>

<h2 id="day03">day03<a class="headerlink" href="#day03" title="Permanent link">&para;</a></h2>
<h3 id="01_2">01视图<a class="headerlink" href="#01_2" title="Permanent link">&para;</a></h3>
<h4 id="_62">数据准备<a class="headerlink" href="#_62" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db7数据库
CREATE DATABASE db7;

-- 使用db7数据库
USE db7;

-- 创建country表
CREATE TABLE country(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 国家id
    country_name VARCHAR(30)                -- 国家名称
);
-- 添加数据
INSERT INTO country VALUES (NULL,&#39;中国&#39;),(NULL,&#39;美国&#39;),(NULL,&#39;俄罗斯&#39;);

-- 创建city表
CREATE TABLE city(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 城市id
    city_name VARCHAR(30),          -- 城市名称
    cid INT, -- 外键列。关联country表的主键列id
    CONSTRAINT cc_fk1 FOREIGN KEY (cid) REFERENCES country(id)  -- 添加外键约束
);
-- 添加数据
INSERT INTO city VALUES (NULL,&#39;北京&#39;,1),(NULL,&#39;上海&#39;,1),(NULL,&#39;纽约&#39;,2),(NULL,&#39;莫斯科&#39;,3);
</code></pre></div>

<h4 id="_63">创建视图<a class="headerlink" href="#_63" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    创建视图</span>
<span class="cm">    标准语法</span>
<span class="cm">        CREATE VIEW 视图名称 [(列名列表)] AS 查询语句;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_64">查询视图<a class="headerlink" href="#_64" title="Permanent link">&para;</a></h4>
<h5 id="_65">查询视图<a class="headerlink" href="#_65" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>

<span class="cm">    标准语法</span>
<span class="cm">        SELECT * FROM 视图名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h5 id="_66">查询创建视图的语句<a class="headerlink" href="#_66" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*  </span>
<span class="cm">    标准语法</span>
<span class="cm">        SHOW CREATE VIEW 视图名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_67">修改视图<a class="headerlink" href="#_67" title="Permanent link">&para;</a></h4>
<h5 id="_68">修改视图表数据<a class="headerlink" href="#_68" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    标准语法</span>
<span class="cm">        UPDATE 视图名称 SET 列名=值 WHERE 条件;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h5 id="_69">修改视图表结构<a class="headerlink" href="#_69" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    修改视图表结构</span>
<span class="cm">    标准语法</span>
<span class="cm">        ALTER VIEW 视图名称 [(列名列表)] AS 查询语句;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_70">删除视图<a class="headerlink" href="#_70" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    删除视图</span>
<span class="cm">    标准语法</span>
<span class="cm">        DROP VIEW [IF EXISTS] 视图名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<h3 id="02_2">02存储过程和函数<a class="headerlink" href="#02_2" title="Permanent link">&para;</a></h3>
<h4 id="_71">数据准备<a class="headerlink" href="#_71" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db8数据库
CREATE DATABASE db8;

-- 使用db8数据库
USE db8;

-- 创建学生表
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 学生id
    NAME VARCHAR(20),           -- 学生姓名
    age INT,                -- 学生年龄
    gender VARCHAR(5),          -- 学生性别
    score INT                               -- 学生成绩
);
-- 添加数据
INSERT INTO student VALUES (NULL,&#39;张三&#39;,23,&#39;男&#39;,95),(NULL,&#39;李四&#39;,24,&#39;男&#39;,98),
(NULL,&#39;王五&#39;,25,&#39;女&#39;,100),(NULL,&#39;赵六&#39;,26,&#39;女&#39;,90);




-- 按照性别进行分组，查询每组学生的总成绩。按照总成绩的升序排序
SELECT gender,SUM(score) getSum FROM student GROUP BY gender ORDER BY getSum ASC;
</code></pre></div>

<h4 id="_72">创建存储过程<a class="headerlink" href="#_72" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>


    <span class="o">--</span> <span class="err">修改分隔符为</span><span class="o">$</span>
    <span class="n">DELIMITER</span> <span class="o">$</span>

    <span class="o">--</span> <span class="err">标准语法</span>
    <span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="err">存储过程名称</span><span class="p">(</span><span class="err">参数</span><span class="p">...)</span>
    <span class="kr">BEGIN</span>
        <span class="n">sql语句</span><span class="p">;</span>
    <span class="kr">END</span><span class="o">$</span>

    <span class="o">--</span> <span class="err">修改分隔符为分号</span>
    <span class="n">DELIMITER</span> <span class="p">;</span>

<span class="o">*/</span>
</code></pre></div>

<p>-- 创建stu_group()存储过程，封装 分组查询总成绩，并按照总成绩升序排序的功能</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">stu_group</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="n">SELECT</span> <span class="n">gender</span><span class="p">,</span><span class="n">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">getSum</span> <span class="n">FROM</span> <span class="n">student</span> <span class="n">GROUP</span> <span class="kr">BY</span> <span class="n">gender</span> <span class="n">ORDER</span> <span class="kr">BY</span> <span class="n">getSum</span> <span class="n">ASC</span><span class="p">;</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<h4 id="_73">调用存储过程<a class="headerlink" href="#_73" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    调用存储过程</span>
<span class="cm">    标准语法</span>
<span class="cm">        CALL 存储过程名称(实际参数);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 调用stu_group存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL stu_group();
</code></pre></div>

<h4 id="_74">查询数据库中所有的存储过程<a class="headerlink" href="#_74" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    查询数据库中所有的存储过程</span>
<span class="cm">    标准语法</span>
<span class="cm">        SELECT name FROM mysql.proc WHERE db=&#39;数据库名称&#39;;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查看db8数据库中所有的存储过程</p>
<div class="codehilite"><pre><span></span><code>SELECT NAME FROM mysql.proc WHERE db=&#39;db8&#39;;
</code></pre></div>

<h4 id="_75">查看存储过程的状态信息<a class="headerlink" href="#_75" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">查看存储过程的状态信息</span>
    <span class="err">标准语法</span>
        <span class="n">SHOW</span> <span class="kr">PROCEDURE</span> <span class="n">STATUS</span><span class="p">;</span>
<span class="o">*/</span>
</code></pre></div>

<p>-- 查看存储过程的状态信息</p>
<div class="codehilite"><pre><span></span><code><span class="n">SHOW</span> <span class="kr">PROCEDURE</span> <span class="n">STATUS</span><span class="p">;</span>
</code></pre></div>

<h4 id="_76">查看存储过程的创建语句<a class="headerlink" href="#_76" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">查看存储过程的创建语句</span>
    <span class="err">标准语法</span>
        <span class="n">SHOW</span> <span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="err">存储过程名称</span><span class="p">;</span>
<span class="o">*/</span>
</code></pre></div>

<p>-- 查询stu_group存储过程的创建语句</p>
<div class="codehilite"><pre><span></span><code><span class="n">SHOW</span> <span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">stu_group</span><span class="p">;</span>
</code></pre></div>

<h4 id="_77">删除存储过程<a class="headerlink" href="#_77" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    删除存储过程</span>
<span class="cm">    标准语法</span>
<span class="cm">        DROP PROCEDURE [IF EXISTS] 存储过程名称;</span>
<span class="cm">*/</span>
</code></pre></div>

<p>-- 删除stu_group存储过程</p>
<div class="codehilite"><pre><span></span><code><span class="n">DROP</span> <span class="kr">PROCEDURE</span> <span class="kr">IF</span> <span class="n">EXISTS</span> <span class="n">stu_group</span><span class="p">;</span>
</code></pre></div>

<h4 id="-">存储过程-变量<a class="headerlink" href="#-" title="Permanent link">&para;</a></h4>
<h5 id="_78">定义变量<a class="headerlink" href="#_78" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    定义变量</span>
<span class="cm">    标准语法</span>
<span class="cm">        DECLARE 变量名 数据类型 [DEFAULT 默认值];</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 定义一个int类型变量，并赋默认值为10</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test1</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义变量</span>
    <span class="n">DECLARE</span> <span class="n">num</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">10</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">查询变量</span>
    <span class="n">SELECT</span> <span class="n">num</span><span class="p">;</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test1存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test1();
</code></pre></div>

<h5 id="-_1">变量赋值-方式一<a class="headerlink" href="#-_1" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    变量赋值-方式一</span>
<span class="cm">    标准语法</span>
<span class="cm">        SET 变量名 = 变量值;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 定义一个varchar类型变量并赋值</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test2</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义变量</span>
    <span class="n">DECLARE</span> <span class="n">NAME</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="o">--</span> <span class="err">为变量赋值</span>
    <span class="kt">SET</span> <span class="n">NAME</span> <span class="o">=</span> <span class="s">&#39;存储过程&#39;</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">查询变量</span>
    <span class="n">SELECT</span> <span class="n">NAME</span><span class="p">;</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test2存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test2();
</code></pre></div>

<p>变量赋值-方式二</p>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    变量赋值-方式二</span>
<span class="cm">    标准语法</span>
<span class="cm">        SELECT 列名 INTO 变量名 FROM 表名 [WHERE 条件];</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 定义两个int变量，用于存储男女同学的总分数</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test3</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义变量</span>
    <span class="n">DECLARE</span> <span class="n">men</span><span class="p">,</span><span class="n">women</span> <span class="n">INT</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">查询男同学的总分数，为</span><span class="n">men变量赋值</span>
    <span class="n">SELECT</span> <span class="n">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">INTO</span> <span class="n">men</span> <span class="n">FROM</span> <span class="n">student</span> <span class="n">WHERE</span> <span class="n">gender</span><span class="o">=</span><span class="s">&#39;男&#39;</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">查询女同学的总分数，为</span><span class="n">women变量赋值</span>
    <span class="n">SELECT</span> <span class="n">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">INTO</span> <span class="n">women</span> <span class="n">FROM</span> <span class="n">student</span> <span class="n">WHERE</span> <span class="n">gender</span><span class="o">=</span><span class="s">&#39;女&#39;</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">查询变量</span>
    <span class="n">SELECT</span> <span class="n">men</span><span class="p">,</span><span class="n">women</span><span class="p">;</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test3存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test3();
</code></pre></div>

<h4 id="-if">存储过程-if语句<a class="headerlink" href="#-if" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">存储过程</span><span class="o">-</span><span class="n">if语句</span>
    <span class="err">标准语法</span>
        <span class="kr">IF</span> <span class="err">判断条件</span><span class="mi">1</span> <span class="kr">THEN</span> <span class="err">执行的</span><span class="n">sql语句1</span><span class="p">;</span>
        <span class="p">[</span><span class="n">ELSEIF</span> <span class="err">判断条件</span><span class="mi">2</span> <span class="kr">THEN</span> <span class="err">执行的</span><span class="n">sql语句2</span><span class="p">;]</span>
        <span class="p">...</span>
        <span class="p">[</span><span class="kr">ELSE</span> <span class="err">执行的</span><span class="n">sql语句n</span><span class="p">;]</span>
        <span class="kr">END</span> <span class="kr">IF</span><span class="p">;</span>
<span class="o">*/</span>
</code></pre></div>

<p>/<em>
    定义一个int变量，用于存储班级总成绩
    定义一个varchar变量，用于存储分数描述
    根据总成绩判断：
        380分及以上   学习优秀
        320 ~ 380     学习不错
        320以下       学习一般
</em>/</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test4</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义保存总成绩的变量</span>
    <span class="n">DECLARE</span> <span class="n">total</span> <span class="n">INT</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">定义保存分数描述的变量</span>
    <span class="n">DECLARE</span> <span class="n">description</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="o">--</span> <span class="err">为</span><span class="n">total赋值</span>
    <span class="n">SELECT</span> <span class="n">SUM</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="n">INTO</span> <span class="n">total</span> <span class="n">FROM</span> <span class="n">student</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">判断总成绩</span>
    <span class="kr">IF</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习优秀&#39;</span><span class="p">;</span>
    <span class="n">ELSEIF</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">320</span> <span class="n">AND</span> <span class="n">total</span> <span class="o">&lt;</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习不错&#39;</span><span class="p">;</span>
    <span class="kr">ELSE</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习一般&#39;</span><span class="p">;</span>
    <span class="kr">END</span> <span class="kr">IF</span><span class="p">;</span>


    <span class="o">--</span> <span class="err">查询总成绩和描述信息</span>
    <span class="n">SELECT</span> <span class="n">total</span><span class="p">,</span><span class="n">description</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test4存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test4();
</code></pre></div>

<h4 id="__1">存储过程_输入参数<a class="headerlink" href="#__1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">输入参数</span>


    <span class="n">DELIMITER</span> <span class="o">$</span>

    <span class="o">--</span> <span class="err">标准语法</span>
    <span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="err">存储过程名称</span><span class="p">(</span><span class="kr">IN</span> <span class="err">参数名</span> <span class="err">数据类型</span><span class="p">)</span>
    <span class="kr">BEGIN</span>
        <span class="err">执行的</span><span class="n">sql语句</span><span class="p">;</span>
    <span class="kr">END</span><span class="o">$</span>

    <span class="n">DELIMITER</span> <span class="p">;</span>

<span class="o">*/</span>
</code></pre></div>

<p>/<em>
    输入总成绩变量，代表学生总成绩
    定义一个varchar变量，用于存储分数描述
    根据总成绩判断：
        380分及以上  学习优秀
        320 ~ 380    学习不错
        320以下      学习一般
</em>/</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test5</span><span class="p">(</span><span class="kr">IN</span> <span class="n">total</span> <span class="n">INT</span><span class="p">)</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义分数描述变量</span>
    <span class="n">DECLARE</span> <span class="n">description</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="o">--</span> <span class="err">判断总成绩</span>
    <span class="kr">IF</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习优秀&#39;</span><span class="p">;</span>
    <span class="n">ELSEIF</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">320</span> <span class="n">AND</span> <span class="n">total</span> <span class="o">&lt;</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习不错&#39;</span><span class="p">;</span>
    <span class="kr">ELSE</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习一般&#39;</span><span class="p">;</span>
    <span class="kr">END</span> <span class="kr">IF</span><span class="p">;</span>


    <span class="o">--</span> <span class="err">查询总成绩和描述信息</span>
    <span class="n">SELECT</span> <span class="n">total</span><span class="p">,</span><span class="n">description</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test5存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test5(310);

CALL pro_test5((SELECT SUM(score) FROM student));
</code></pre></div>

<h4 id="__2">存储过程_输出参数<a class="headerlink" href="#__2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">输出参数</span>


    <span class="n">DELIMITER</span> <span class="o">$</span>

    <span class="o">--</span> <span class="err">标准语法</span>
    <span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="err">存储过程名称</span><span class="p">(</span><span class="kr">OUT</span> <span class="err">参数名</span> <span class="err">数据类型</span><span class="p">)</span>
    <span class="kr">BEGIN</span>
        <span class="err">执行的</span><span class="n">sql语句</span><span class="p">;</span>
    <span class="kr">END</span><span class="o">$</span>

    <span class="n">DELIMITER</span> <span class="p">;</span>

<span class="o">*/</span>
</code></pre></div>

<p>/输入总成绩变量，代表学生总成绩
    输出分数描述变量，代表学生总成绩的描述
    根据总成绩判断：
        380分及以上  学习优秀
        320 ~ 380    学习不错
        320以下      学习一般
*/</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test6</span><span class="p">(</span><span class="kr">IN</span> <span class="n">total</span> <span class="n">INT</span><span class="p">,</span><span class="kr">OUT</span> <span class="n">description</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">判断总成绩</span>
    <span class="kr">IF</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习优秀&#39;</span><span class="p">;</span>
    <span class="n">ELSEIF</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">320</span> <span class="n">AND</span> <span class="n">total</span> <span class="o">&lt;</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习不错&#39;</span><span class="p">;</span>
    <span class="kr">ELSE</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习一般&#39;</span><span class="p">;</span>
    <span class="kr">END</span> <span class="kr">IF</span><span class="p">;</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test6存储过程</p>
<div class="codehilite"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="n">pro_test6</span><span class="p">(</span><span class="mi">390</span><span class="p">,</span><span class="nv">@description</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<p>-- 查询总成绩描述信息变量</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="nv">@description</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<h4 id="_case">存储过程_case语句<a class="headerlink" href="#_case" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="n">case语句</span>
    <span class="err">标准语法</span>
        <span class="kr">CASE</span>
        <span class="n">WHEN</span> <span class="err">判断条件</span><span class="mi">1</span> <span class="kr">THEN</span> <span class="err">执行</span><span class="n">sql语句1</span><span class="p">;</span>
        <span class="p">[</span><span class="n">WHEN</span> <span class="err">判断条件</span><span class="mi">2</span> <span class="kr">THEN</span> <span class="err">执行</span><span class="n">sql语句2</span><span class="p">;]</span>
        <span class="p">...</span>
        <span class="p">[</span><span class="kr">ELSE</span> <span class="err">执行</span><span class="n">sql语句n</span><span class="p">;]</span>
        <span class="kr">END</span> <span class="kr">CASE</span><span class="p">;</span>
<span class="o">*/</span>
</code></pre></div>

<p>/<em>
    输入总成绩变量，代表学生总成绩
    定义一个varchar变量，用于存储分数描述
    根据总成绩判断：
        380分及以上  学习优秀
        320 ~ 380    学习不错
        320以下      学习一般
</em>/</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test7</span><span class="p">(</span><span class="kr">IN</span> <span class="n">total</span> <span class="n">INT</span><span class="p">)</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义总成绩描述信息变量</span>
    <span class="n">DECLARE</span> <span class="n">description</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="o">--</span> <span class="err">判断总成绩</span>
    <span class="kr">CASE</span>
    <span class="n">WHEN</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习优秀&#39;</span><span class="p">;</span>
    <span class="n">WHEN</span> <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">320</span> <span class="n">AND</span> <span class="n">total</span> <span class="o">&lt;</span> <span class="mi">380</span> <span class="kr">THEN</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习不错&#39;</span><span class="p">;</span>
    <span class="kr">ELSE</span>
        <span class="kt">SET</span> <span class="n">description</span> <span class="o">=</span> <span class="s">&#39;学习一般&#39;</span><span class="p">;</span>
    <span class="kr">END</span> <span class="kr">CASE</span><span class="p">;</span>


    <span class="o">--</span> <span class="err">查询总成绩和描述信息</span>
    <span class="n">SELECT</span> <span class="n">total</span><span class="p">,</span><span class="n">description</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test7存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test7(310);
</code></pre></div>

<h4 id="_while">存储过程_while循环<a class="headerlink" href="#_while" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="n">while循环</span>
    <span class="err">标准语法</span>
        <span class="err">初始化语句</span><span class="p">;</span>
        <span class="kr">WHILE</span> <span class="err">条件判断语句</span> <span class="kr">DO</span>
            <span class="err">循环体语句</span><span class="p">;</span>
            <span class="err">条件控制语句</span><span class="p">;</span>
        <span class="kr">END</span> <span class="kr">WHILE</span><span class="p">;</span>
<span class="o">*/</span>
</code></pre></div>

<p>-- 计算1~100之间的偶数和</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test8</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义求和变量</span>
    <span class="n">DECLARE</span> <span class="n">result</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">0</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">定义初始化变量</span>
    <span class="n">DECLARE</span> <span class="n">num</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">1</span><span class="p">;</span>
    <span class="o">--</span> <span class="n">while循环</span>
    <span class="kr">WHILE</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="mi">100</span> <span class="kr">DO</span>
        <span class="o">--</span> <span class="err">判断</span><span class="n">num是否是偶数</span>
        <span class="kr">IF</span> <span class="n">num</span><span class="err">%</span><span class="mi">2</span><span class="o">=</span><span class="mi">0</span> <span class="kr">THEN</span>
            <span class="o">--</span> <span class="err">让</span><span class="n">num和result进行累加</span>
            <span class="kt">SET</span> <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">num</span><span class="p">;</span>
        <span class="kr">END</span> <span class="kr">IF</span><span class="p">;</span>


        <span class="o">--</span> <span class="err">让</span><span class="n">num进行自增</span>
        <span class="kt">SET</span> <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kr">END</span> <span class="kr">WHILE</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">查询求和结果</span>
    <span class="n">SELECT</span> <span class="n">result</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test8存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test8();
</code></pre></div>

<h4 id="_repeat">存储过程_repeat循环<a class="headerlink" href="#_repeat" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="n">repeat循环</span>
    <span class="err">标准语法</span>
        <span class="err">初始化语句</span><span class="p">;</span>
        <span class="kr">REPEAT</span>
            <span class="err">循环体语句</span><span class="p">;</span>
            <span class="err">条件控制语句</span><span class="p">;</span>
            <span class="kr">UNTIL</span> <span class="err">条件判断语句</span>
        <span class="kr">END</span> <span class="kr">REPEAT</span><span class="p">;</span>
<span class="o">*/</span>
</code></pre></div>

<p>-- 计算1~10之间的和</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test9</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义求和变量</span>
    <span class="n">DECLARE</span> <span class="n">result</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">0</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">定义初始化变量</span>
    <span class="n">DECLARE</span> <span class="n">num</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">1</span><span class="p">;</span>
    <span class="o">--</span> <span class="n">repeat循环</span>
    <span class="kr">REPEAT</span>
        <span class="o">--</span> <span class="err">累加</span>
        <span class="kt">SET</span> <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="o">+</span> <span class="n">num</span><span class="p">;</span>
        <span class="o">--</span> <span class="err">让</span><span class="n">num</span><span class="o">+</span><span class="mi">1</span>
        <span class="kt">SET</span> <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>


        <span class="o">--</span> <span class="err">停止循环</span>
        <span class="kr">UNTIL</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">10</span>
    <span class="kr">END</span> <span class="kr">REPEAT</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">查询求和结果</span>
    <span class="n">SELECT</span> <span class="n">result</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test9存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test9();
</code></pre></div>

<h4 id="_loop">存储过程_loop循环<a class="headerlink" href="#_loop" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c">/*</span>
<span class="c">    loop循环</span>
<span class="c">    标准语法</span>
<span class="c">        初始化语句;</span>
<span class="c">        </span><span class="cp">[</span><span class="nx">循环名称</span><span class="p">:</span><span class="cp">]</span><span class="c"> LOOP</span>
<span class="c">            条件判断语句</span>
<span class="c">                </span><span class="cp">[</span><span class="nx">LEAVE</span> <span class="nx">循环名称</span><span class="p">;</span><span class="cp">]</span><span class="c"></span>
<span class="c">            循环体语句;</span>
<span class="c">            条件控制语句;</span>
<span class="c">        END LOOP 循环名称;</span>
<span class="c">*/</span>
</code></pre></div>

<p>-- 计算1~10之间的和</p>
<div class="codehilite"><pre><span></span><code><span class="nt">DELIMITER</span> <span class="o">$</span>

<span class="nt">CREATE</span> <span class="nt">PROCEDURE</span> <span class="nt">pro_test10</span><span class="o">()</span>
<span class="nt">BEGIN</span>
    <span class="nt">--</span> <span class="nt">定义求和变量</span>
    <span class="nt">DECLARE</span> <span class="nt">result</span> <span class="nt">INT</span> <span class="nt">DEFAULT</span> <span class="nt">0</span><span class="o">;</span>
    <span class="nt">--</span> <span class="nt">定义初始化变量</span>
    <span class="nt">DECLARE</span> <span class="nt">num</span> <span class="nt">INT</span> <span class="nt">DEFAULT</span> <span class="nt">1</span><span class="o">;</span>


    <span class="nt">--</span> <span class="nt">loop循环</span>
    <span class="nt">l</span><span class="p">:</span><span class="nd">LOOP</span>
        <span class="nt">--</span> <span class="nt">条件判断</span><span class="err">，</span><span class="nt">停止循环</span>
        <span class="nt">IF</span> <span class="nt">num</span> <span class="o">&gt;</span> <span class="nt">10</span> <span class="nt">THEN</span>
            <span class="nt">LEAVE</span> <span class="nt">l</span><span class="o">;</span>
        <span class="nt">END</span> <span class="nt">IF</span><span class="o">;</span>

        <span class="nt">--</span> <span class="nt">累加</span>
        <span class="nt">SET</span> <span class="nt">result</span> <span class="o">=</span> <span class="nt">result</span> <span class="o">+</span> <span class="nt">num</span><span class="o">;</span>
        <span class="nt">--</span> <span class="nt">让num</span><span class="o">+</span><span class="nt">1</span>
        <span class="nt">SET</span> <span class="nt">num</span> <span class="o">=</span> <span class="nt">num</span> <span class="o">+</span> <span class="nt">1</span><span class="o">;</span>
    <span class="nt">END</span> <span class="nt">LOOP</span> <span class="nt">l</span><span class="o">;</span>

    <span class="nt">--</span> <span class="nt">查询求和结果</span>
    <span class="nt">SELECT</span> <span class="nt">result</span><span class="o">;</span>

<span class="nt">END</span><span class="o">$</span>

<span class="nt">DELIMITER</span> <span class="o">;</span>
</code></pre></div>

<p>-- 调用pro_test10存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test10();
</code></pre></div>

<h4 id="__3">存储过程_游标<a class="headerlink" href="#__3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    游标</span>
<span class="cm">    标准语法</span>
<span class="cm">        1.创建游标：DECLARE 游标名称 CURSOR FOR 查询sql语句;</span>
<span class="cm">        2.打开游标：OPEN 游标名称;</span>
<span class="cm">        3.使用游标：FETCH 游标名称 INTO 变量名1,变量名2,...;</span>
<span class="cm">        4.关闭游标：CLOSE 游标名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 创建stu_score表</p>
<div class="codehilite"><pre><span></span><code>CREATE TABLE stu_score(
    id INT PRIMARY KEY AUTO_INCREMENT,
    score INT
);
</code></pre></div>

<p>-- 将student表中所有的成绩保存到stu_score表中</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test11</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义一个保存成绩的变量</span>
    <span class="n">DECLARE</span> <span class="n">s_score</span> <span class="n">INT</span><span class="p">;</span>


    <span class="o">--</span> <span class="err">创建游标</span>
    <span class="n">DECLARE</span> <span class="n">stu_result</span> <span class="n">CURSOR</span> <span class="kr">FOR</span> <span class="n">SELECT</span> <span class="n">score</span> <span class="n">FROM</span> <span class="n">student</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">开启游标</span>
    <span class="n">OPEN</span> <span class="n">stu_result</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">使用游标</span>
    <span class="o">--</span> <span class="err">遍历结果，拿到第</span><span class="mi">1</span><span class="err">行数据</span>
    <span class="n">FETCH</span> <span class="n">stu_result</span> <span class="n">INTO</span> <span class="n">s_score</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">将数据保存到</span><span class="n">stu_score表中</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">stu_score</span> <span class="n">VALUES</span> <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="n">s_score</span><span class="p">);</span>

    <span class="o">--</span> <span class="err">遍历结果，拿到第</span><span class="mi">2</span><span class="err">行数据</span>
    <span class="n">FETCH</span> <span class="n">stu_result</span> <span class="n">INTO</span> <span class="n">s_score</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">将数据保存到</span><span class="n">stu_score表中</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">stu_score</span> <span class="n">VALUES</span> <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="n">s_score</span><span class="p">);</span>

    <span class="o">--</span> <span class="err">遍历结果，拿到第</span><span class="mi">3</span><span class="err">行数据</span>
    <span class="n">FETCH</span> <span class="n">stu_result</span> <span class="n">INTO</span> <span class="n">s_score</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">将数据保存到</span><span class="n">stu_score表中</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">stu_score</span> <span class="n">VALUES</span> <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="n">s_score</span><span class="p">);</span>

    <span class="o">--</span> <span class="err">遍历结果，拿到第</span><span class="mi">4</span><span class="err">行数据</span>
    <span class="n">FETCH</span> <span class="n">stu_result</span> <span class="n">INTO</span> <span class="n">s_score</span><span class="p">;</span>
    <span class="o">--</span> <span class="err">将数据保存到</span><span class="n">stu_score表中</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">stu_score</span> <span class="n">VALUES</span> <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="n">s_score</span><span class="p">);</span>

    <span class="o">--</span> <span class="err">关闭游标</span>
    <span class="kr">CLOSE</span> <span class="n">stu_result</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test11存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test11();
</code></pre></div>

<p>-- 查询stu_score数据表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM stu_score;
</code></pre></div>

<h4 id="__4">存储过程_游标优化<a class="headerlink" href="#__4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    当游标结束后，会自动的触发一个事件。就代表游标已经结束了！</span>
<span class="cm">    加标记的思想：</span>
<span class="cm">        1.定义一个标记变量，默认值为0（意味着有数据）</span>
<span class="cm">        2.当游标结束后，将标记变量的值修改为1（意味着没有数据了）  </span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test12</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义一个保存成绩的变量</span>
    <span class="n">DECLARE</span> <span class="n">s_score</span> <span class="n">INT</span><span class="p">;</span>


    <span class="o">--</span> <span class="err">定义一个标记变量，默认值为</span><span class="mi">0</span><span class="err">（意味着有数据）</span>
    <span class="n">DECLARE</span> <span class="n">flag</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">0</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">创建游标</span>
    <span class="n">DECLARE</span> <span class="n">stu_result</span> <span class="n">CURSOR</span> <span class="kr">FOR</span> <span class="n">SELECT</span> <span class="n">score</span> <span class="n">FROM</span> <span class="n">student</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">当游标结束后，将标记变量的值修改为</span><span class="mi">1</span><span class="err">（意味着没有数据了）</span>
    <span class="n">DECLARE</span> <span class="kr">EXIT</span> <span class="n">HANDLER</span> <span class="kr">FOR</span> <span class="n">NOT</span> <span class="n">FOUND</span> <span class="kt">SET</span> <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">开启游标</span>
    <span class="n">OPEN</span> <span class="n">stu_result</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">循环使用游标</span>
    <span class="kr">REPEAT</span>
        <span class="o">--</span> <span class="err">遍历结果，拿到数据</span>
        <span class="n">FETCH</span> <span class="n">stu_result</span> <span class="n">INTO</span> <span class="n">s_score</span><span class="p">;</span>
        <span class="o">--</span> <span class="err">将数据保存到</span><span class="n">stu_score表中</span>
        <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">stu_score</span> <span class="n">VALUES</span> <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="n">s_score</span><span class="p">);</span>

        <span class="o">--</span> <span class="err">当</span><span class="n">flag的值是1的时候</span><span class="err">，就停止循环</span>
        <span class="kr">UNTIL</span> <span class="n">flag</span><span class="o">=</span><span class="mi">1</span>
    <span class="kr">END</span> <span class="kr">REPEAT</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">关闭游标</span>
    <span class="kr">CLOSE</span> <span class="n">stu_result</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 调用pro_test12存储过程</p>
<div class="codehilite"><pre><span></span><code>CALL pro_test12();
</code></pre></div>

<p>-- 查询stu_score表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM stu_score;
</code></pre></div>

<h4 id="_79">存储函数<a class="headerlink" href="#_79" title="Permanent link">&para;</a></h4>
<h5 id="_80">创建存储函数<a class="headerlink" href="#_80" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">创建存储函数</span>
    <span class="err">标准语法</span>
        <span class="n">CREATE</span> <span class="n">FUNCTION</span> <span class="err">函数名称</span><span class="p">([</span><span class="err">参数</span> <span class="err">数据类型</span><span class="p">])</span>
        <span class="n">RETURNS</span> <span class="err">返回值类型</span>
        <span class="kr">BEGIN</span>
            <span class="err">执行的</span><span class="n">sql语句</span><span class="p">;</span>
            <span class="kr">RETURN</span> <span class="err">结果</span><span class="p">;</span>
        <span class="kr">END</span><span class="o">$</span>
<span class="o">*/</span>
</code></pre></div>

<p>-- 定义存储函数，获取学生表中成绩大于95分的学生数量</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="n">FUNCTION</span> <span class="n">fun_test1</span><span class="p">()</span>
<span class="n">RETURNS</span> <span class="n">INT</span>
<span class="kr">BEGIN</span>
    <span class="o">--</span> <span class="err">定义一个统计变量</span>
    <span class="n">DECLARE</span> <span class="n">result</span> <span class="n">INT</span><span class="p">;</span>


    <span class="o">--</span> <span class="err">查询成绩大于</span><span class="mi">95</span><span class="err">分的数量</span>
    <span class="n">SELECT</span> <span class="n">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">INTO</span> <span class="n">result</span> <span class="n">FROM</span> <span class="n">student</span> <span class="n">WHERE</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="mi">95</span><span class="p">;</span>

    <span class="o">--</span> <span class="err">将结果返回</span>
    <span class="kr">RETURN</span> <span class="n">result</span><span class="p">;</span>

<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<h5 id="_81">调用函数<a class="headerlink" href="#_81" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    调用函数</span>
<span class="cm">    标准语法</span>
<span class="cm">        SELECT 函数名称(实际参数);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 调用函数</p>
<div class="codehilite"><pre><span></span><code>SELECT fun_test1();
</code></pre></div>

<h5 id="_82">删除函数<a class="headerlink" href="#_82" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    删除函数</span>
<span class="cm">    标准语法</span>
<span class="cm">        DROP FUNCTION 函数名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 删除函数</p>
<div class="codehilite"><pre><span></span><code>DROP FUNCTION fun_test1;
</code></pre></div>

<h3 id="03_2">03触发器<a class="headerlink" href="#03_2" title="Permanent link">&para;</a></h3>
<h4 id="_83">触发器数据准备<a class="headerlink" href="#_83" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db9数据库
CREATE DATABASE db9;

-- 使用db9数据库
USE db9;

-- 创建账户表account
CREATE TABLE account(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 账户id
    NAME VARCHAR(20),           -- 姓名
    money DOUBLE                -- 余额
);
-- 添加数据
INSERT INTO account VALUES (NULL,&#39;张三&#39;,1000),(NULL,&#39;李四&#39;,2000);


-- 创建日志表account_log
CREATE TABLE account_log(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 日志id
    operation VARCHAR(20),          -- 操作类型 (insert update delete)
    operation_time DATETIME,        -- 操作时间
    operation_id INT,           -- 操作表的id
    operation_params VARCHAR(200)           -- 操作参数
);
</code></pre></div>

<h4 id="insert">INSERT型触发器<a class="headerlink" href="#insert" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">创建触发器</span>
    <span class="err">标准语法</span>
        <span class="n">DELIMITER</span> <span class="o">$</span>

        <span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="err">触发器名称</span>
        <span class="n">BEFORE</span><span class="p">|</span><span class="n">AFTER</span> <span class="n">INSERT</span><span class="p">|</span><span class="n">UPDATE</span><span class="p">|</span><span class="n">DELETE</span>
        <span class="n">ON</span> <span class="err">表名</span>
        <span class="kr">FOR</span> <span class="mh">EACH</span> <span class="n">ROW</span>
        <span class="kr">BEGIN</span>
            <span class="err">触发器要执行的功能</span><span class="p">;</span>
        <span class="kr">END</span><span class="o">$</span>

        <span class="n">DELIMITER</span> <span class="p">;</span>

<span class="o">*/</span>
</code></pre></div>

<p>-- 创建INSERT型触发器。用于对account表新增数据进行日志的记录</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="n">account_insert</span>
<span class="n">AFTER</span> <span class="n">INSERT</span>
<span class="n">ON</span> <span class="n">account</span>
<span class="kr">FOR</span> <span class="mh">EACH</span> <span class="n">ROW</span>
<span class="kr">BEGIN</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">account_log</span> <span class="n">VALUES</span> 
    <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="s">&#39;INSERT&#39;</span><span class="p">,</span><span class="n">NOW</span><span class="p">(),</span><span class="n">new</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">CONCAT</span><span class="p">(</span><span class="s">&#39;插入后{id=&#39;</span><span class="p">,</span><span class="n">new</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="s">&#39;,name=&#39;</span><span class="p">,</span><span class="n">new</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;,money=&#39;</span><span class="p">,</span><span class="n">new</span><span class="p">.</span><span class="n">money</span><span class="p">,</span><span class="s">&#39;}&#39;</span><span class="p">));</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 向account表来添加一条记录</p>
<div class="codehilite"><pre><span></span><code>INSERT INTO account VALUES (NULL,&#39;王五&#39;,3000);
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 查询account_log表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account_log;
</code></pre></div>

<h4 id="update">UPDATE型触发器<a class="headerlink" href="#update" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">创建触发器</span>
    <span class="err">标准语法</span>
        <span class="n">DELIMITER</span> <span class="o">$</span>

        <span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="err">触发器名称</span>
        <span class="n">BEFORE</span><span class="p">|</span><span class="n">AFTER</span> <span class="n">INSERT</span><span class="p">|</span><span class="n">UPDATE</span><span class="p">|</span><span class="n">DELETE</span>
        <span class="n">ON</span> <span class="err">表名</span>
        <span class="kr">FOR</span> <span class="mh">EACH</span> <span class="n">ROW</span>
        <span class="kr">BEGIN</span>
            <span class="err">触发器要执行的功能</span><span class="p">;</span>
        <span class="kr">END</span><span class="o">$</span>

        <span class="n">DELIMITER</span> <span class="p">;</span>

<span class="o">*/</span>
</code></pre></div>

<p>-- 创建UPDATE型触发器。用于对account表修改数据进行日志的记录</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="n">account_update</span>
<span class="n">AFTER</span> <span class="n">UPDATE</span>
<span class="n">ON</span> <span class="n">account</span>
<span class="kr">FOR</span> <span class="mh">EACH</span> <span class="n">ROW</span>
<span class="kr">BEGIN</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">account_log</span> <span class="n">VALUES</span> 
    <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="s">&#39;UPDATE&#39;</span><span class="p">,</span><span class="n">NOW</span><span class="p">(),</span><span class="n">new</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">CONCAT</span><span class="p">(</span><span class="s">&#39;修改前{id=&#39;</span><span class="p">,</span><span class="n">old</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="s">&#39;,name=&#39;</span><span class="p">,</span><span class="n">old</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;,money=&#39;</span><span class="p">,</span><span class="n">old</span><span class="p">.</span><span class="n">money</span><span class="p">,</span><span class="s">&#39;}&#39;</span><span class="p">,</span><span class="s">&#39;修改后{id=&#39;</span><span class="p">,</span><span class="n">new</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="s">&#39;,name=&#39;</span><span class="p">,</span><span class="n">new</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;,money=&#39;</span><span class="p">,</span><span class="n">new</span><span class="p">.</span><span class="n">money</span><span class="p">,</span><span class="s">&#39;}&#39;</span><span class="p">));</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 修改account表中李四的金额为2500</p>
<div class="codehilite"><pre><span></span><code>UPDATE account SET money=2500 WHERE NAME=&#39;李四&#39;;
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 查询account_log表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account_log;
</code></pre></div>

<h4 id="delete">DELETE型触发器<a class="headerlink" href="#delete" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">/*</span>
    <span class="err">创建触发器</span>
    <span class="err">标准语法</span>
        <span class="n">DELIMITER</span> <span class="o">$</span>

        <span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="err">触发器名称</span>
        <span class="n">BEFORE</span><span class="p">|</span><span class="n">AFTER</span> <span class="n">INSERT</span><span class="p">|</span><span class="n">UPDATE</span><span class="p">|</span><span class="n">DELETE</span>
        <span class="n">ON</span> <span class="err">表名</span>
        <span class="kr">FOR</span> <span class="mh">EACH</span> <span class="n">ROW</span>
        <span class="kr">BEGIN</span>
            <span class="err">触发器要执行的功能</span><span class="p">;</span>
        <span class="kr">END</span><span class="o">$</span>

        <span class="n">DELIMITER</span> <span class="p">;</span>

<span class="o">*/</span>
</code></pre></div>

<p>-- 创建DELETE型触发器。用于对account表删除数据进行日志的记录</p>
<div class="codehilite"><pre><span></span><code><span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="n">TRIGGER</span> <span class="n">account_delete</span>
<span class="n">AFTER</span> <span class="n">DELETE</span>
<span class="n">ON</span> <span class="n">account</span>
<span class="kr">FOR</span> <span class="mh">EACH</span> <span class="n">ROW</span>
<span class="kr">BEGIN</span>
    <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">account_log</span> <span class="n">VALUES</span> 
    <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="s">&#39;DELETE&#39;</span><span class="p">,</span><span class="n">NOW</span><span class="p">(),</span><span class="n">old</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="n">CONCAT</span><span class="p">(</span><span class="s">&#39;删除前{id=&#39;</span><span class="p">,</span><span class="n">old</span><span class="p">.</span><span class="n">id</span><span class="p">,</span><span class="s">&#39;,name=&#39;</span><span class="p">,</span><span class="n">old</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="s">&#39;,money=&#39;</span><span class="p">,</span><span class="n">old</span><span class="p">.</span><span class="n">money</span><span class="p">,</span><span class="s">&#39;}&#39;</span><span class="p">));</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>
</code></pre></div>

<p>-- 删除account表中王五</p>
<div class="codehilite"><pre><span></span><code>DELETE FROM account WHERE NAME=&#39;王五&#39;;
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 查询account_log表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account_log;
</code></pre></div>

<h4 id="_84">查看触发器<a class="headerlink" href="#_84" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    查看触发器</span>
<span class="cm">    标准语法</span>
<span class="cm">        SHOW TRIGGERS;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查看触发器</p>
<div class="codehilite"><pre><span></span><code><span class="k">SHOW</span> <span class="nv">TRIGGERS</span><span class="c1">;</span>
</code></pre></div>

<h4 id="_85">删除触发器<a class="headerlink" href="#_85" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    删除触发器</span>
<span class="cm">    标准语法</span>
<span class="cm">        DROP TRIGGER 触发器名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 删除触发器</p>
<div class="codehilite"><pre><span></span><code>DROP TRIGGER account_delete;
</code></pre></div>

<h3 id="04_1">04事务<a class="headerlink" href="#04_1" title="Permanent link">&para;</a></h3>
<h4 id="_86">事务的数据准备<a class="headerlink" href="#_86" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db10数据库
CREATE DATABASE db10;

-- 使用db10数据库
USE db10;

-- 创建账户表
CREATE TABLE account(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 账户id
    NAME VARCHAR(20),           -- 账户名称
    money DOUBLE                -- 账户余额
);
-- 添加数据
INSERT INTO account VALUES (NULL,&#39;张三&#39;,1000),(NULL,&#39;李四&#39;,1000);
</code></pre></div>

<h4 id="_87">未管理事务<a class="headerlink" href="#_87" title="Permanent link">&para;</a></h4>
<p>-- 张三给李四转账500元
-- 1.张三账户-500</p>
<div class="codehilite"><pre><span></span><code>UPDATE account SET money=money-500 WHERE NAME=&#39;张三&#39;;
</code></pre></div>

<p>出错了...</p>
<p>-- 2.李四账户+500</p>
<div class="codehilite"><pre><span></span><code>UPDATE account SET money=money+500 WHERE NAME=&#39;李四&#39;;
</code></pre></div>

<h4 id="_88">管理事务<a class="headerlink" href="#_88" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    开启事务：START TRANSACTION;</span>
<span class="cm">    回滚事务：ROLLBACK;</span>
<span class="cm">    提交事务：COMMIT;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 张三给李四转账500元
-- 1.开启事务</p>
<div class="codehilite"><pre><span></span><code>START TRANSACTION;
</code></pre></div>

<p>-- 2.执行转账的操作
UPDATE account SET money=money-500 WHERE NAME='张三';
出错了...
UPDATE account SET money=money+500 WHERE NAME='李四';</p>
<p>-- 3.结束事务
-- 3.1回滚事务</p>
<div class="codehilite"><pre><span></span><code>ROLLBACK;
</code></pre></div>

<p>-- 3.2提交事务</p>
<div class="codehilite"><pre><span></span><code>COMMIT;
</code></pre></div>

<h4 id="_89">事务的提交方式<a class="headerlink" href="#_89" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    事务的提交方式</span>
<span class="cm">        查询事务提交方式：SELECT @@AUTOCOMMIT;  -- 1代表自动提交    0代表手动提交</span>
<span class="cm">        修改事务提交方式：SET @@AUTOCOMMIT=数字;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查询事务的提交方式</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="nb">@@autocommit</span><span class="p">;</span><span class="w"></span>

<span class="k">UPDATE</span><span class="w"> </span><span class="n">account</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="nc">money</span><span class="o">=</span><span class="mi">1000</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">NAME</span><span class="o">=</span><span class="s1">&#39;张三&#39;</span><span class="p">;</span><span class="w"></span>

<span class="k">COMMIT</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<p>-- 修改事务的提交方式</p>
<div class="codehilite"><pre><span></span><code><span class="k">SET</span><span class="w"> </span><span class="nb">@@autocommit</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<h4 id="_90">查询和修改事务的隔离级别<a class="headerlink" href="#_90" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    事务的隔离级别</span>
<span class="cm">        查询隔离级别：SELECT @@TX_ISOLATION;</span>
<span class="cm">        修改隔离级别：SET GLOBAL TRANSACTION ISOLATION LEVEL 级别字符串;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查询事务隔离级别</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="nb">@@tx_isolation</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<p>-- 修改事务隔离级别</p>
<div class="codehilite"><pre><span></span><code>SET GLOBAL TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
</code></pre></div>

<h4 id="_91">脏读的问题演示和解决_窗口1<a class="headerlink" href="#_91" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    脏读的问题演示和解决</span>
<span class="cm">    脏读：一个事务中读取到了其他事务未提交的数据</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 设置事务隔离级别为read uncommitted</p>
<div class="codehilite"><pre><span></span><code>SET GLOBAL TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;
</code></pre></div>

<p>-- 开启事务</p>
<div class="codehilite"><pre><span></span><code>START TRANSACTION;
</code></pre></div>

<p>-- 转账</p>
<div class="codehilite"><pre><span></span><code>UPDATE account SET money = money-500 WHERE NAME=&#39;张三&#39;;
UPDATE account SET money = money+500 WHERE NAME=&#39;李四&#39;;
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 回滚</p>
<div class="codehilite"><pre><span></span><code>ROLLBACK;
</code></pre></div>

<h4 id="_92">脏读的问题演示和解决_窗口2<a class="headerlink" href="#_92" title="Permanent link">&para;</a></h4>
<p>-- 查询事务隔离级别</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="nb">@@tx_isolation</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<p>-- 开启事务</p>
<div class="codehilite"><pre><span></span><code>START TRANSACTION;
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<h4 id="_93">不可重复读的问题演示和解决_窗口1<a class="headerlink" href="#_93" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    不可重复读的问题演示和解决</span>
<span class="cm">    不可重复读：一个事务中读取到了其他事务已提交的数据</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 设置事务隔离级别为read committed</p>
<div class="codehilite"><pre><span></span><code>SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;
SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
</code></pre></div>

<p>-- 开启事务</p>
<div class="codehilite"><pre><span></span><code>START TRANSACTION;
</code></pre></div>

<p>-- 转账</p>
<div class="codehilite"><pre><span></span><code>UPDATE account SET money = money-500 WHERE NAME=&#39;张三&#39;;
UPDATE account SET money = money+500 WHERE NAME=&#39;李四&#39;;
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 提交事务</p>
<div class="codehilite"><pre><span></span><code>COMMIT;
</code></pre></div>

<h4 id="_94">不可重复读的问题演示和解决_窗口2<a class="headerlink" href="#_94" title="Permanent link">&para;</a></h4>
<p>-- 查询隔离级别</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="nb">@@tx_isolation</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<p>-- 开启事务</p>
<div class="codehilite"><pre><span></span><code>START TRANSACTION;
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 提交事务</p>
<div class="codehilite"><pre><span></span><code>COMMIT;
</code></pre></div>

<h4 id="_95">幻读的问题演示和解决_窗口1<a class="headerlink" href="#_95" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    幻读的问题演示和解决</span>
<span class="cm">    幻读：</span>
<span class="cm">    查询某记录是否存在，不存在</span>
<span class="cm">    准备插入此记录，但执行插入时发现此记录已存在，无法插入</span>
<span class="cm">    或某记录不存在执行删除，却发现删除成功</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 设置隔离级别为repeatable read</p>
<div class="codehilite"><pre><span></span><code>SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SET GLOBAL TRANSACTION ISOLATION LEVEL SERIALIZABLE;
</code></pre></div>

<p>-- 开启事务</p>
<div class="codehilite"><pre><span></span><code>START TRANSACTION;
</code></pre></div>

<p>-- 添加记录</p>
<div class="codehilite"><pre><span></span><code>INSERT INTO account VALUES (4,&#39;赵六&#39;,2000);
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 提交事务</p>
<div class="codehilite"><pre><span></span><code>COMMIT;
</code></pre></div>

<h4 id="_96">幻读的问题演示和解决_窗口2<a class="headerlink" href="#_96" title="Permanent link">&para;</a></h4>
<p>-- 查询隔离级别</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="nb">@@tx_isolation</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<p>-- 开启事务</p>
<div class="codehilite"><pre><span></span><code>START TRANSACTION;
</code></pre></div>

<p>-- 查询account表</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM account;
</code></pre></div>

<p>-- 添加</p>
<div class="codehilite"><pre><span></span><code>INSERT INTO account VALUES (3,&#39;王五&#39;,2000);
</code></pre></div>

<h2 id="day04">day04<a class="headerlink" href="#day04" title="Permanent link">&para;</a></h2>
<h3 id="01_3">01存储引擎<a class="headerlink" href="#01_3" title="Permanent link">&para;</a></h3>
<h4 id="_97">查询数据库支持的存储引擎<a class="headerlink" href="#_97" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    查询数据库支持的存储引擎</span>
<span class="cm">    标准语法</span>
<span class="cm">        SHOW ENGINES;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_98">查询某个数据库中所有数据表的存储引擎<a class="headerlink" href="#_98" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    查询某个数据库中所有数据表的存储引擎</span>
<span class="cm">    标准语法</span>
<span class="cm">        SHOW TABLE STATUS FROM 数据库名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_99">查询某个数据库中某个表的存储引擎<a class="headerlink" href="#_99" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    查询某个数据库中某个表的存储引擎</span>
<span class="cm">    标准语法</span>
<span class="cm">        SHOW TABLE STATUS FROM 数据库名称 WHERE NAME = &#39;数据表名称&#39;;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_100">创建数据表指定存储引擎<a class="headerlink" href="#_100" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    创建数据表指定存储引擎</span>
<span class="cm">    标准语法</span>
<span class="cm">        CREATE TABLE 表名(</span>
<span class="cm">            列名,数据类型,</span>
<span class="cm">            ...</span>
<span class="cm">        )ENGINE = 引擎名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<h4 id="_101">修改数据表的存储引擎<a class="headerlink" href="#_101" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    修改数据表的存储引擎</span>
<span class="cm">    标准语法</span>
<span class="cm">        ALTER TABLE 表名 ENGINE = 引擎名称;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 修改engine_test表的引擎为InnoDB</p>
<div class="codehilite"><pre><span></span><code>ALTER TABLE engine_test ENGINE = INNODB;
</code></pre></div>

<p>-- 查询engine_test表的存储引擎</p>
<div class="codehilite"><pre><span></span><code><span class="k">SHOW</span> <span class="nv">TABLE</span> <span class="nv">STATUS</span> <span class="nv">FROM</span> <span class="nv">db11</span> <span class="nv">WHERE</span> <span class="nv">NAME</span> <span class="o">=</span><span class="s1">&#39;</span><span class="s">engine_test</span><span class="s1">&#39;</span><span class="c1">;</span>
</code></pre></div>

<h3 id="02_3">02索引<a class="headerlink" href="#02_3" title="Permanent link">&para;</a></h3>
<h4 id="_102">索引数据准备<a class="headerlink" href="#_102" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db12数据库
CREATE DATABASE db12;

-- 使用db12数据库
USE db12;

-- 创建student表
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(10),
    age INT,
    score INT
);
-- 添加数据
INSERT INTO student VALUES (NULL,&#39;张三&#39;,23,98),(NULL,&#39;李四&#39;,24,95),
(NULL,&#39;王五&#39;,25,96),(NULL,&#39;赵六&#39;,26,94),(NULL,&#39;周七&#39;,27,99);
</code></pre></div>

<h4 id="_103">创建和查询索引<a class="headerlink" href="#_103" title="Permanent link">&para;</a></h4>
<h5 id="_104">创建索引<a class="headerlink" href="#_104" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    创建索引</span>
<span class="cm">    标准语法</span>
<span class="cm">        CREATE [UNIQUE|FULLTEXT] INDEX 索引名称</span>
<span class="cm">        [USING 索引类型]  -- 默认是B+TREE</span>
<span class="cm">        ON 表名(列名...);</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 为student表中的name列创建一个普通索引</p>
<div class="codehilite"><pre><span></span><code>CREATE INDEX idx_name ON student(NAME);
</code></pre></div>

<p>-- 为student表中的age列创建一个唯一索引</p>
<div class="codehilite"><pre><span></span><code>CREATE UNIQUE INDEX idx_age ON student(age);
</code></pre></div>

<h5 id="_105">查询索引<a class="headerlink" href="#_105" title="Permanent link">&para;</a></h5>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    查询索引</span>
<span class="cm">    标准语法</span>
<span class="cm">        SHOW INDEX FROM 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 查询student表中的索引</p>
<div class="codehilite"><pre><span></span><code><span class="k">SHOW</span> <span class="nv">INDEX</span> <span class="nv">FROM</span> <span class="nv">student</span><span class="c1">;</span>
</code></pre></div>

<h4 id="alter">ALTER添加索引<a class="headerlink" href="#alter" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    ALTER添加索引</span>
<span class="cm">    -- 普通索引</span>
<span class="cm">    ALTER TABLE 表名 ADD INDEX 索引名称(列名);</span>

<span class="cm">    -- 组合索引</span>
<span class="cm">    ALTER TABLE 表名 ADD INDEX 索引名称(列名1,列名2,...);</span>

<span class="cm">    -- 主键索引</span>
<span class="cm">    ALTER TABLE 表名 ADD PRIMARY KEY(主键列名); </span>

<span class="cm">    -- 外键索引(添加外键约束，就是外键索引)</span>
<span class="cm">    ALTER TABLE 表名 ADD CONSTRAINT 外键名 FOREIGN KEY (本表外键列名) REFERENCES 主表名(主键列名);</span>

<span class="cm">    -- 唯一索引</span>
<span class="cm">    ALTER TABLE 表名 ADD UNIQUE 索引名称(列名);</span>

<span class="cm">    -- 全文索引</span>
<span class="cm">    ALTER TABLE 表名 ADD FULLTEXT 索引名称(列名);</span>

<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 为student表中name列添加全文索引</p>
<div class="codehilite"><pre><span></span><code>ALTER TABLE student ADD FULLTEXT idx_fulltext_name(NAME);
</code></pre></div>

<p>-- 查询student表的索引</p>
<div class="codehilite"><pre><span></span><code><span class="k">SHOW</span> <span class="nv">INDEX</span> <span class="nv">FROM</span> <span class="nv">student</span><span class="c1">;</span>
</code></pre></div>

<h4 id="_106">删除索引<a class="headerlink" href="#_106" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    删除索引</span>
<span class="cm">    标准语法</span>
<span class="cm">        DROP INDEX 索引名称 ON 表名;</span>
<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 删除idx_name索引</p>
<div class="codehilite"><pre><span></span><code>DROP INDEX idx_name ON student;
</code></pre></div>

<h4 id="_107">索引的效率测试<a class="headerlink" href="#_107" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">--</span> <span class="err">创建</span><span class="n">product商品表</span>
<span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">product</span><span class="p">(</span>
    <span class="n">id</span> <span class="n">INT</span> <span class="n">PRIMARY</span> <span class="n">KEY</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>  <span class="o">--</span> <span class="err">商品</span><span class="n">id</span>
    <span class="n">NAME</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>           <span class="o">--</span> <span class="err">商品名称</span>
    <span class="n">price</span> <span class="n">INT</span>                           <span class="o">--</span> <span class="err">商品价格</span>
<span class="p">);</span>

<span class="o">--</span> <span class="err">定义存储函数，生成长度为</span><span class="mi">10</span><span class="err">的随机字符串并返回</span>
<span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="n">FUNCTION</span> <span class="n">rand_string</span><span class="p">()</span> 
<span class="n">RETURNS</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
<span class="kr">BEGIN</span>
    <span class="n">DECLARE</span> <span class="n">big_str</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s">&#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ&#39;</span><span class="p">;</span>
    <span class="n">DECLARE</span> <span class="n">small_str</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span> <span class="n">DEFAULT</span> <span class="s">&#39;&#39;</span><span class="p">;</span>
    <span class="n">DECLARE</span> <span class="n">i</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">1</span><span class="p">;</span>

    <span class="kr">WHILE</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="kr">DO</span>
        <span class="kt">SET</span> <span class="n">small_str</span> <span class="o">=</span><span class="n">CONCAT</span><span class="p">(</span><span class="n">small_str</span><span class="p">,</span><span class="n">SUBSTRING</span><span class="p">(</span><span class="n">big_str</span><span class="p">,</span><span class="n">FLOOR</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">RAND</span><span class="p">()</span><span class="o">*</span><span class="mi">52</span><span class="p">),</span><span class="mi">1</span><span class="p">));</span>
        <span class="kt">SET</span> <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
    <span class="kr">END</span> <span class="kr">WHILE</span><span class="p">;</span>

    <span class="kr">RETURN</span> <span class="n">small_str</span><span class="p">;</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>



<span class="o">--</span> <span class="err">定义存储过程，添加</span><span class="mi">100</span><span class="err">万条数据到</span><span class="n">product表中</span>
<span class="n">DELIMITER</span> <span class="o">$</span>

<span class="n">CREATE</span> <span class="kr">PROCEDURE</span> <span class="n">pro_test</span><span class="p">()</span>
<span class="kr">BEGIN</span>
    <span class="n">DECLARE</span> <span class="n">num</span> <span class="n">INT</span> <span class="n">DEFAULT</span> <span class="mi">1</span><span class="p">;</span>

    <span class="kr">WHILE</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="mi">1000000</span> <span class="kr">DO</span>
        <span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">product</span> <span class="n">VALUES</span> <span class="p">(</span><span class="n">NULL</span><span class="p">,</span><span class="n">rand_string</span><span class="p">(),</span><span class="n">num</span><span class="p">);</span>
        <span class="kt">SET</span> <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kr">END</span> <span class="kr">WHILE</span><span class="p">;</span>
<span class="kr">END</span><span class="o">$</span>

<span class="n">DELIMITER</span> <span class="p">;</span>

<span class="o">--</span> <span class="err">调用存储过程</span>
<span class="n">CALL</span> <span class="n">pro_test</span><span class="p">();</span>


<span class="o">--</span> <span class="err">查询总记录条数</span>
<span class="n">SELECT</span> <span class="n">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">product</span><span class="p">;</span>



<span class="o">--</span> <span class="err">查询</span><span class="n">product表的索引</span>
<span class="n">SHOW</span> <span class="n">INDEX</span> <span class="n">FROM</span> <span class="n">product</span><span class="p">;</span>

<span class="o">--</span> <span class="err">查询</span><span class="n">name为OkIKDLVwtG的数据</span>   <span class="p">(</span><span class="mf">0.049</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">WHERE</span> <span class="n">NAME</span><span class="o">=</span><span class="s">&#39;OkIKDLVwtG&#39;</span><span class="p">;</span>

<span class="o">--</span> <span class="err">通过</span><span class="n">id列查询OkIKDLVwtG的数据</span>  <span class="p">(</span><span class="mi">1</span><span class="err">毫秒</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">WHERE</span> <span class="n">id</span><span class="o">=</span><span class="mi">999998</span><span class="p">;</span>

<span class="o">--</span> <span class="err">为</span><span class="n">name列添加索引</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">product</span> <span class="n">ADD</span> <span class="n">INDEX</span> <span class="n">idx_name</span><span class="p">(</span><span class="n">NAME</span><span class="p">);</span>

<span class="o">--</span> <span class="err">查询</span><span class="n">name为OkIKDLVwtG的数据</span>   <span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">WHERE</span> <span class="n">NAME</span><span class="o">=</span><span class="s">&#39;OkIKDLVwtG&#39;</span><span class="p">;</span>


<span class="o">/*</span>
    <span class="err">范围查询</span>
<span class="o">*/</span>
<span class="o">--</span> <span class="err">查询价格为</span><span class="mi">800</span><span class="o">~</span><span class="mi">1000</span><span class="err">之间的所有数据</span> <span class="p">(</span><span class="mf">0.052</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">WHERE</span> <span class="n">price</span> <span class="n">BETWEEN</span> <span class="mi">800</span> <span class="n">AND</span> <span class="mi">1000</span><span class="p">;</span>

<span class="o">/*</span>
    <span class="err">排序查询</span>
<span class="o">*/</span>
<span class="o">--</span> <span class="err">查询价格为</span><span class="mi">800</span><span class="o">~</span><span class="mi">1000</span><span class="err">之间的所有数据</span><span class="p">,</span><span class="err">降序排列</span>  <span class="p">(</span><span class="mf">0.083</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">WHERE</span> <span class="n">price</span> <span class="n">BETWEEN</span> <span class="mi">800</span> <span class="n">AND</span> <span class="mi">1000</span> <span class="n">ORDER</span> <span class="kr">BY</span> <span class="n">price</span> <span class="n">DESC</span><span class="p">;</span>

<span class="o">--</span> <span class="err">为</span><span class="n">price列添加索引</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">product</span> <span class="n">ADD</span> <span class="n">INDEX</span> <span class="n">idx_price</span><span class="p">(</span><span class="n">price</span><span class="p">);</span>

<span class="o">--</span> <span class="err">查询价格为</span><span class="mi">800</span><span class="o">~</span><span class="mi">1000</span><span class="err">之间的所有数据</span> <span class="p">(</span><span class="mf">0.011</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">WHERE</span> <span class="n">price</span> <span class="n">BETWEEN</span> <span class="mi">800</span> <span class="n">AND</span> <span class="mi">1000</span><span class="p">;</span>

<span class="o">--</span> <span class="err">查询价格为</span><span class="mi">800</span><span class="o">~</span><span class="mi">1000</span><span class="err">之间的所有数据</span><span class="p">,</span><span class="err">降序排列</span>  <span class="p">(</span><span class="mf">0.001</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">product</span> <span class="n">WHERE</span> <span class="n">price</span> <span class="n">BETWEEN</span> <span class="mi">800</span> <span class="n">AND</span> <span class="mi">1000</span> <span class="n">ORDER</span> <span class="kr">BY</span> <span class="n">price</span> <span class="n">DESC</span><span class="p">;</span>
</code></pre></div>

<h3 id="03_3">03锁<a class="headerlink" href="#03_3" title="Permanent link">&para;</a></h3>
<h4 id="innodb">InnoDB锁的数据准备<a class="headerlink" href="#innodb" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建db13数据库
CREATE DATABASE db13;

-- 使用db13数据库
USE db13;

-- 创建student表
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(10),
    age INT,
    score INT
);
-- 添加数据
INSERT INTO student VALUES (NULL,&#39;张三&#39;,23,99),(NULL,&#39;李四&#39;,24,95),
(NULL,&#39;王五&#39;,25,98),(NULL,&#39;赵六&#39;,26,97);
</code></pre></div>

<h4 id="innodb_1">InnoDB共享锁_窗口1<a class="headerlink" href="#innodb_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 窗口1
/*
    共享锁：数据可以被多个事务查询，但是不能修改
    创建锁的格式
        SELECT语句 LOCK IN SHARE MODE;
*/
-- 开启事务
START TRANSACTION;

-- 查询id为1的数据记录。并且加入共享锁
SELECT * FROM student WHERE id=1 LOCK IN SHARE MODE;

-- 查询分数为99的数据记录。并且加入共享锁
SELECT * FROM student WHERE score=99 LOCK IN SHARE MODE;

-- 提交事务
COMMIT;
</code></pre></div>

<h4 id="innodb_2">InnoDB共享锁_窗口2<a class="headerlink" href="#innodb_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 开启事务
START TRANSACTION;

-- 查询id为1的数据记录。(普通查询没问题)
SELECT * FROM student WHERE id=1;

-- 查询id为1的数据记录。并且加入共享锁(共享锁和共享锁是兼容的)
SELECT * FROM student WHERE id=1 LOCK IN SHARE MODE;

-- 修改id为1的数据。修改姓名为张三三(修改失败，会出现锁的情况。只有窗口1提交事务后，才能修改成功)
UPDATE student SET NAME=&#39;张三三&#39; WHERE id=1;

-- 修改id为2的数据。修改姓名为李四四(修改成功。InnoDB引擎默认是行锁)
UPDATE student SET NAME=&#39;李四四&#39; WHERE id=2;

-- 修改id为3的数据。修改姓名为王五五(注意：InnoDB引擎如果不采用带索引的列，则会提升为表锁)
UPDATE student SET NAME=&#39;王五五&#39; WHERE id=3;

-- 提交事务
COMMIT;
</code></pre></div>

<h4 id="innodb_3">InnoDB排他锁_窗口1<a class="headerlink" href="#innodb_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">--</span> 窗口<span class="mi">1</span>
<span class="cm">/*</span>
<span class="cm">    排他锁：加锁的数据，不能被其他事务加锁查询或修改</span>
<span class="cm">    排他锁创建格式</span>
<span class="cm">        SELECT语句 FOR UPDATE;</span>
<span class="cm">*/</span>
<span class="o">--</span> 开启事务
<span class="nv">START</span> <span class="nv">TRANSACTION</span><span class="c1">;</span>

<span class="o">--</span> 查询<span class="nv">id</span>为<span class="mi">1</span>的数据记录。并且加入排他锁
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">student</span> <span class="nv">WHERE</span> <span class="nv">id</span><span class="o">=</span><span class="mi">1</span> <span class="k">FOR</span> <span class="nv">UPDATE</span><span class="c1">;</span>

<span class="o">--</span> 提交事务
<span class="nv">COMMIT</span><span class="c1">;</span>
</code></pre></div>

<h4 id="innodb_4">InnoDB排他锁_窗口2<a class="headerlink" href="#innodb_4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">--</span> 开启事务
<span class="nv">START</span> <span class="nv">TRANSACTION</span><span class="c1">;</span>

<span class="o">--</span> 查询<span class="nv">id</span>为<span class="mi">1</span>的数据记录。<span class="ss">(</span>普通查询没问题<span class="ss">)</span>
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">student</span> <span class="nv">WHERE</span> <span class="nv">id</span><span class="o">=</span><span class="mi">1</span><span class="c1">;</span>

<span class="o">--</span> 查询<span class="nv">id</span>为<span class="mi">1</span>的数据记录。并且加入共享锁<span class="ss">(</span>排他锁不能和共享锁共存<span class="ss">)</span>
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">student</span> <span class="nv">WHERE</span> <span class="nv">id</span><span class="o">=</span><span class="mi">1</span> <span class="nv">LOCK</span> <span class="nv">IN</span> <span class="nv">SHARE</span> <span class="nv">MODE</span><span class="c1">;</span>

<span class="o">--</span> 查询<span class="nv">id</span>为<span class="mi">1</span>的数据记录。并且加入排他锁<span class="ss">(</span>排他锁和排他锁不能共存<span class="ss">)</span>
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">student</span> <span class="nv">WHERE</span> <span class="nv">id</span><span class="o">=</span><span class="mi">1</span> <span class="k">FOR</span> <span class="nv">UPDATE</span><span class="c1">;</span>

<span class="o">--</span> 修改<span class="nv">id</span>为<span class="mi">1</span>的数据。将姓名修改为张三三<span class="ss">(</span>不能修改。会出现锁的情况。只有窗口<span class="mi">1</span>提交事务后，才能修改成功<span class="ss">)</span>
<span class="nv">UPDATE</span> <span class="nv">student</span> <span class="nv">SET</span> <span class="nv">NAME</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">张三三</span><span class="s1">&#39;</span> <span class="nv">WHERE</span> <span class="nv">id</span><span class="o">=</span><span class="mi">1</span><span class="c1">;</span>

<span class="o">--</span> 提交事务
<span class="nv">COMMIT</span><span class="c1">;</span>
</code></pre></div>

<h4 id="myisam">MYISAM锁的数据准备<a class="headerlink" href="#myisam" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建product表
CREATE TABLE product(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(20),
    price INT
)ENGINE = MYISAM;  -- 指定存储引擎为MyISAM

-- 添加数据
INSERT INTO product VALUES (NULL,&#39;华为手机&#39;,4999),(NULL,&#39;小米手机&#39;,2999),
(NULL,&#39;苹果&#39;,8999),(NULL,&#39;中兴&#39;,1999);
</code></pre></div>

<h4 id="myisam_1">MYISAM读锁_窗口1<a class="headerlink" href="#myisam_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    读锁：所有连接只能读取数据，不能修改</span>
<span class="cm">    加锁</span>
<span class="cm">        LOCK TABLE 表名 READ;</span>

<span class="cm">    解锁(将当前会话所有的表进行解锁)</span>
<span class="cm">        UNLOCK TABLES;</span>

<span class="cm">*/</span><span class="w"></span>
</code></pre></div>

<p>-- 为product表添加读锁</p>
<div class="codehilite"><pre><span></span><code>LOCK TABLE product READ;
</code></pre></div>

<p>-- 查询product表(查询成功)</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM product;
</code></pre></div>

<p>-- 将id为1的价格修改为5999(不能修改)</p>
<div class="codehilite"><pre><span></span><code>UPDATE product SET price=5999 WHERE id=1;
</code></pre></div>

<p>-- 解锁</p>
<div class="codehilite"><pre><span></span><code>UNLOCK TABLES;
</code></pre></div>

<h4 id="myisam_2">MYISAM读锁_窗口2<a class="headerlink" href="#myisam_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 查询product表(查询成功)
SELECT * FROM product;

-- 将id为1的价格修改为5999(不能修改。只有窗口1解锁后才能修改成功)
UPDATE product SET price=5999 WHERE id=1;
</code></pre></div>

<h4 id="myisam_3">MYISAM写锁_窗口1<a class="headerlink" href="#myisam_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="cm">/*</span>
<span class="cm">    写锁：其他连接不能查询和修改数据</span>
<span class="cm">    加锁</span>
<span class="cm">        LOCK TABLE 表名 WRITE;</span>

<span class="cm">    解锁(将当前会话所有的表进行解锁)</span>
<span class="cm">        UNLOCK TABLES;</span>
<span class="cm">*/</span><span class="w"></span>
<span class="o">--</span><span class="w"> </span><span class="err">为</span>product表添加写锁<span class="w"></span>
LOCK<span class="w"> </span>TABLE<span class="w"> </span>product<span class="w"> </span>WRITE<span class="err">;</span><span class="w"></span>

<span class="o">--</span><span class="w"> </span><span class="err">查询</span>product表<span class="o">(</span><span class="err">查询成功</span><span class="o">)</span><span class="w"></span>
<span class="kr">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>FROM<span class="w"> </span>product<span class="err">;</span><span class="w"></span>

<span class="o">--</span><span class="w"> </span><span class="err">修改</span>id为2的价格为3999<span class="o">(</span><span class="err">修改成功</span><span class="o">)</span><span class="w"></span>
UPDATE<span class="w"> </span>product<span class="w"> </span>SET<span class="w"> </span>price<span class="o">=</span><span class="m">3999</span><span class="w"> </span>WHERE<span class="w"> </span>id<span class="o">=</span><span class="m">2</span><span class="err">;</span><span class="w"></span>

<span class="o">--</span><span class="w"> </span><span class="err">解锁</span><span class="w"></span>
UNLOCK<span class="w"> </span>TABLES<span class="err">;</span><span class="w"></span>
</code></pre></div>

<h4 id="myisam_4">MYISAM写锁_窗口2<a class="headerlink" href="#myisam_4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 查询product表（查询失败。只有窗口1解锁后，才能查询成功）
SELECT * FROM product;

-- 修改id为2的价格为1999(修改失败。只有窗口1解锁后，才能修改成功)
UPDATE product SET price=1999 WHERE id=2;
</code></pre></div>

<h4 id="_108">乐观锁<a class="headerlink" href="#_108" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建city表
CREATE TABLE city(
    id INT PRIMARY KEY AUTO_INCREMENT,  -- 城市id
    NAME VARCHAR(20),                   -- 城市名称
    VERSION INT                         -- 版本号
);

-- 添加数据
INSERT INTO city VALUES (NULL,&#39;北京&#39;,1),(NULL,&#39;上海&#39;,1),(NULL,&#39;广州&#39;,1),(NULL,&#39;深圳&#39;,1);


-- 将北京修改为北京市
-- 1.将北京的版本号读取出来
SELECT VERSION FROM city WHERE NAME=&#39;北京&#39;;   -- 1
-- 2.修改北京为北京市，版本号+1.并对比版本号是否相同
UPDATE city SET NAME=&#39;北京市&#39;,VERSION=VERSION+1 WHERE NAME=&#39;北京&#39; AND VERSION=1;
</code></pre></div>

<h3 id="04_2">04主从复制<a class="headerlink" href="#04_2" title="Permanent link">&para;</a></h3>
<h4 id="__5">主从复制_主服务器操作<a class="headerlink" href="#__5" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 主服务器创建db1数据库,从服务器会自动同步
CREATE DATABASE db1;
</code></pre></div>

<h4 id="__6">主从复制_从服务器操作<a class="headerlink" href="#__6" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 从服务器创建db2数据库,主服务器不会自动同步
CREATE DATABASE db2;
</code></pre></div>

<h3 id="05">05读写分离<a class="headerlink" href="#05" title="Permanent link">&para;</a></h3>
<h4 id="_mycat">读写分离_mycat操作<a class="headerlink" href="#_mycat" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 创建学生表
CREATE TABLE student(
    id INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(10)
);
-- 查询学生表
SELECT * FROM student;

-- 添加两条记录
INSERT INTO student VALUES (NULL,&#39;张三&#39;),(NULL,&#39;李四&#39;);

-- 停止主从复制后，添加的数据只会保存到主服务器上。
INSERT INTO student VALUES (NULL,&#39;王五&#39;);
</code></pre></div>

<h4 id="__7">读写分离_主服务器操作<a class="headerlink" href="#__7" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 主服务器：查询学生表，可以看到数据
SELECT * FROM student;
</code></pre></div>

<h4 id="__8">读写分离_从服务器操作<a class="headerlink" href="#__8" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 从服务器：查询学生表，可以看到数据(因为有主从复制)
SELECT * FROM student;

-- 从服务器：删除一条记录。(主服务器并没有删除，mycat中间件查询的结果是从服务器的数据)
DELETE FROM student WHERE id=2;
</code></pre></div>

<h3 id="06">06水平拆分<a class="headerlink" href="#06" title="Permanent link">&para;</a></h3>
<h4 id="_mycat_1">水平拆分_mycat操作<a class="headerlink" href="#_mycat_1" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">--</span> 创建<span class="nv">product</span>表
<span class="nv">CREATE</span> <span class="nv">TABLE</span> <span class="nv">product</span><span class="ss">(</span>
    <span class="nv">id</span> <span class="nv">INT</span> <span class="nv">PRIMARY</span> <span class="nv">KEY</span> <span class="nv">AUTO_INCREMENT</span>,
    <span class="nv">NAME</span> <span class="nv">VARCHAR</span><span class="ss">(</span><span class="mi">20</span><span class="ss">)</span>,
    <span class="nv">price</span> <span class="nv">INT</span>
<span class="ss">)</span><span class="c1">;</span>

<span class="o">--</span> 添加<span class="mi">6</span>条数据
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">product</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span>,<span class="nv">price</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">苹果手机</span><span class="s1">&#39;</span>,<span class="mi">6999</span><span class="ss">)</span><span class="c1">;</span>
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">product</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span>,<span class="nv">price</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">华为手机</span><span class="s1">&#39;</span>,<span class="mi">5999</span><span class="ss">)</span><span class="c1">; </span>
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">product</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span>,<span class="nv">price</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">三星手机</span><span class="s1">&#39;</span>,<span class="mi">4999</span><span class="ss">)</span><span class="c1">; </span>
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">product</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span>,<span class="nv">price</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">小米手机</span><span class="s1">&#39;</span>,<span class="mi">3999</span><span class="ss">)</span><span class="c1">; </span>
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">product</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span>,<span class="nv">price</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">中兴手机</span><span class="s1">&#39;</span>,<span class="mi">2999</span><span class="ss">)</span><span class="c1">; </span>
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">product</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span>,<span class="nv">price</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">OOPO手机</span><span class="s1">&#39;</span>,<span class="mi">1999</span><span class="ss">)</span><span class="c1">; </span>

<span class="o">--</span> 查询<span class="nv">product</span>表
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">product</span><span class="c1">; </span>
</code></pre></div>

<h4 id="__9">水平拆分_主服务器操作<a class="headerlink" href="#__9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 在不同数据库中查询product表
SELECT * FROM product;
</code></pre></div>

<h4 id="__10">水平拆分_从服务器操作<a class="headerlink" href="#__10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 在不同数据库中查询product表
SELECT * FROM product;
</code></pre></div>

<h3 id="07">07垂直拆分<a class="headerlink" href="#07" title="Permanent link">&para;</a></h3>
<h4 id="_mycat_2">垂直拆分_mycat操作<a class="headerlink" href="#_mycat_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="o">--</span> 创建<span class="nv">dog</span>表
<span class="nv">CREATE</span> <span class="nv">TABLE</span> <span class="nv">dog</span><span class="ss">(</span>
    <span class="nv">id</span> <span class="nv">INT</span> <span class="nv">PRIMARY</span> <span class="nv">KEY</span> <span class="nv">AUTO_INCREMENT</span>,
    <span class="nv">NAME</span> <span class="nv">VARCHAR</span><span class="ss">(</span><span class="mi">10</span><span class="ss">)</span>
<span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 添加数据
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">dog</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">哈士奇</span><span class="s1">&#39;</span><span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 查询<span class="nv">dog</span>表
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">dog</span><span class="c1">;</span>


<span class="o">--</span> 创建<span class="nv">cat</span>表
<span class="nv">CREATE</span> <span class="nv">TABLE</span> <span class="nv">cat</span><span class="ss">(</span>
    <span class="nv">id</span> <span class="nv">INT</span> <span class="nv">PRIMARY</span> <span class="nv">KEY</span> <span class="nv">AUTO_INCREMENT</span>,
    <span class="nv">NAME</span> <span class="nv">VARCHAR</span><span class="ss">(</span><span class="mi">10</span><span class="ss">)</span>
<span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 添加数据
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">cat</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">波斯猫</span><span class="s1">&#39;</span><span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 查询<span class="nv">cat</span>表
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">cat</span><span class="c1">;</span>





<span class="o">--</span> 创建<span class="nv">apple</span>表
<span class="nv">CREATE</span> <span class="nv">TABLE</span> <span class="nv">apple</span><span class="ss">(</span>
    <span class="nv">id</span> <span class="nv">INT</span> <span class="nv">PRIMARY</span> <span class="nv">KEY</span> <span class="nv">AUTO_INCREMENT</span>,
    <span class="nv">NAME</span> <span class="nv">VARCHAR</span><span class="ss">(</span><span class="mi">10</span><span class="ss">)</span>
<span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 添加数据
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">apple</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">红富士</span><span class="s1">&#39;</span><span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 查询<span class="nv">apple</span>表
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">apple</span><span class="c1">;</span>


<span class="o">--</span> 创建<span class="nv">banana</span>表
<span class="nv">CREATE</span> <span class="nv">TABLE</span> <span class="nv">banana</span><span class="ss">(</span>
    <span class="nv">id</span> <span class="nv">INT</span> <span class="nv">PRIMARY</span> <span class="nv">KEY</span> <span class="nv">AUTO_INCREMENT</span>,
    <span class="nv">NAME</span> <span class="nv">VARCHAR</span><span class="ss">(</span><span class="mi">10</span><span class="ss">)</span>
<span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 添加数据
<span class="nv">INSERT</span> <span class="nv">INTO</span> <span class="nv">banana</span><span class="ss">(</span><span class="nv">id</span>,<span class="nv">NAME</span><span class="ss">)</span> <span class="nv">VALUES</span> <span class="ss">(</span><span class="k">NEXT</span> <span class="nv">VALUE</span> <span class="k">FOR</span> <span class="nv">MYCATSEQ_GLOBAL</span>,<span class="s1">&#39;</span><span class="s">香蕉</span><span class="s1">&#39;</span><span class="ss">)</span><span class="c1">;</span>
<span class="o">--</span> 查询<span class="nv">banana</span>表
<span class="nv">SELECT</span> <span class="o">*</span> <span class="nv">FROM</span> <span class="nv">banana</span><span class="c1">;</span>
</code></pre></div>

<h4 id="__11">垂直拆分_主服务器操作<a class="headerlink" href="#__11" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 查询dog表
SELECT * FROM dog;
-- 查询cat表
SELECT * FROM cat;


-- 查询apple表
SELECT * FROM apple;
-- 查询banana表
SELECT * FROM banana;
</code></pre></div>

<h4 id="__12">垂直拆分_从服务器操作<a class="headerlink" href="#__12" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code>-- 查询dog表
SELECT * FROM dog;
-- 查询cat表
SELECT * FROM cat;


-- 查询apple表
SELECT * FROM apple;
-- 查询banana表
SELECT * FROM banana;
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="上一页: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../jquery/" class="md-footer__link md-footer__link--next" aria-label="下一页: JQuery" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              JQuery
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019 peaceiris
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/peaceiris" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/piris314en" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["tabs"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.82b56eb2.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>